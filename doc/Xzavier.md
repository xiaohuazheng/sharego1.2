
 


本科生毕业设计（技术报告）












题    目      基于网络爬虫的商品评论导购网站	
学    院             软件学院	
专    业             软件工程	
学生姓名              郑晓华	
学    号   2012141463230  	年级     2012	
指导教师               陈文	

教务处制表
二Ο一六年一月一日
 


基于网络爬虫的商品评论导购网站


软件工程

学生  郑晓华   指导老师  陈文


[摘要]  随着互联网的不断创新、发展和普及，网上购物越来越受到热捧。电子商务是电子信息和互联网技术结合厂商或其他交易主体之间进行的信息商务活动，而网上购物正是这种活动的表现形式之一，网上购物影响我们的生活越来越深。而人们购物的选择则是基于物品的外观、价格和评价等，其中，外界的评价很大程度上影响着用户购买的选择。用户进入购物网站，看到商品，会浏览关于商品的评论，帮助自己分析，最后决定是否购买。但是，随着网络站点的大量增长，网络中的信息量逐渐增大，非常庞杂的信息使得用户在挑选自己满意的商品时显得非常麻烦，海量的商品信息让用户在选择时非常困难。
为了解决用户购物要浏览大量信息而浪费掉大量时间的问题，解决用户查看评论信息不直观的问题，本网站利用网络爬虫爬取目标网站的商品信息，并对商品信息分类展示，爬取商品的主要评价数据，对评论数据进行图表化，提供给用户直观的可视化评价分析图，突出商品商品优缺点，以帮助用户进行选择，帮助用户区分商品是否值得购买，节约时间成本，提高整个购物的效率。
技术方面，本网站基于网络爬虫，拟用Node.js为语言技术，express为技术框架、MySQL存储数据，用Superagent爬取商品数据，用Cheerio过滤并获取数据，用Canvas对数据以图表的方式可视化。最后网站在商品页给用户提供一个基于评论数据直观化的评论图表，以提升用户购物体验，推进电子商务购物平台的发展。
[主题词]  网络爬虫；Node；数据分析；网站导购
 


A Website of Shopping guide based on web crawler

Software Engineering

Student： ZHENG Xiao-hua       Adviser: CHEN Wen


[Abstract]  With the innovation, development and popularization of the Internet, online shopping is being substantially boosted. E-commerce is an information commerce activity implemented between the electronic information, Internet technology and the manufactures, or other transaction participants. Meanwhile, online shopping is the representative of this activity. Online shopping gradually has a huge influence on people’s life. On 11/11/2015, the turnover of the “Double Eleven Shopping Carnival” held by Taobao and Tianmao reached 91.217 billion RMB. The user of online shopping becomes more and more. The appearance, price and comment of a product are the basic standards for consumers’ decision. Among them, the comment of a product has a great influence on consumers’ decision. Users log in the online shopping website to browse the products. When they choose a fitted one, they will see the comments which will help the users to make a decision. However, with the substantial increase of the Web sites, the online information becomes multifarious and disorderly, which makes the purchase process inconvenient. This website is a comment website based on the Web Crawler. It will use the Web Crawler to acquire the popular comments and show them on the website. It will sum up the numerous comment and help users filter, distinguish the products. This website could save the time and cost, hence improving the online shopping efficiency. Technically speaking, this product comment website is based on Web Crawler, utilizing Node.js, express, MySQL to explore and superagent to acquire data. Besides, this website would directly show the data to users, in order to enhance the user experience and promote the development of E-commerce online shopping.
[Key Words]  web crawler; Node; Express; crawling data
 
目  录
1.	绪论	1
1.1.	项目背景	1
1.2.	国内外研究现状	2
1.3.	项目主要工作	2
1.4.	报告组织与结构	3
2.	项目涉及的相关知识和技术简介	4
2.1.	NODE.JS简介	4
2.2.	NODE.JS的事件机制简介	4
2.3.	EXPRESS框架简介	5
2.4.	EXPRESS请求机制简介	5
2.5.	SUPERAGENT简介	5
3.	系统设计与开发	6
3.1.	项目概况	6
3.2.	概要设计	6
3.2.1.	系统结构设计	6
3.2.2.	用户交互模块概要设计	6
3.2.3.	信息展示模块概要设计	7
3.2.4.	后台管理模块概要设计	7
3.2.5.	web服务端处理请求模块概要设计	7
3.2.6.	模块功能关系	7
3.3.	详细设计	8
3.3.1.	用户交互模块详细设计	8
3.3.2.	信息展示模块详细设计	11
3.3.3.	后台管理模块详细设计	12
3.3.4.	web服务端处理请求模块详细设计	13
3.4.	本章小结	14
4.	测试与验证	15
4.1.	测试效果	15
4.1.1.	首页运行效果	15
4.1.2.	评论图表运行效果	15
4.1.3.	商品详情页运行效果：	16
4.2.	信息展示模块测试	17
4.2.1.	商品信息展示测试用例	17
4.2.2.	用户信息展示测试用例	18
4.2.3.	评论信息展示测试用例	18
4.3.	用户交互模块测试	19
4.3.1.	注册登录功能测试用例	19
4.3.2.	评论收藏购买功能测试用例	20
4.3.3.	信息修改功能测试用例	20
4.3.4.	商品搜索功能测试用例	21
4.4.	后台管理模块测试	21
4.4.1.	数据爬取功能测试用例	21
4.4.2.	用户管理功能测试用例	22
4.4.3.	管理员管理功能测试用例	22
4.5.	WEB服务端处理请求模块测试	23
4.5.1.	搜索请求处理测试用例	23
4.5.2.	注册登录请求处理测试用例	23
4.5.3.	评论或收藏请求处理测试用例	24
4.5.4.	数据爬取请求处理测试用例	25
4.6.	本章小结	25
5.	评价	26
5.1.	对项目开发过程的体会	26
5.1.1.	过程总结	26
5.1.2.	出现的问题及解决	26
5.2.	对项目的评价	26
小结	27
参考资料	28
致  谢	29
附录1需求规格说明书	30
1.	引言	30
1.1.	编写目的	30
1.2.	背景	30
2.	功能模型	32
2.1.	客户端功能描述	32
2.1.1.	信息展示模块	32
2.1.2.	用户交互模块	32
2.1.3.	后台管理模块	32
2.2.	WEB服务端功能描述	32
2.2.1.	web服务端处理请求模块	32
3.	数据模型	33
3.1.	数据逻辑描述	33
3.2.	数据的具体表现	33
4.	用户行为模型	34
4.1.	登录注册行为模型	34
4.2.	品牌评论行为模型	34
4.3.	商品收藏行为模型	34
4.4.	信息修改行为模型	34
4.5.	用户管理行为模型	34
5.	软硬件要求	35
5.1.	时间特性要求	35
5.2.	错误处理要求	35
5.3.	其它要求	35
5.4.	运行浏览器	35
5.5.	控制	35
附录2 设计文档	36
1.	系统结构设计	36
2.	概要设计	36
2.1.	设计目的	36
2.2.	用户交互模块概要设计	36
2.3.	信息展示模块概要设计	37
2.4.	后台管理模块概要设计	37
2.5.	WEB服务端处理请求模块概要设计	37
3.	详细设计	38
3.1.	引言	38
3.1.1.	编写目的	38
3.1.2.	参考资料	38
3.2.	用户交互模块详细设计	38
3.2.1.	模块描述	38
3.2.2.	功能	38
3.2.3.	性能	39
3.2.4.	设计方法	39
3.2.5.	流程逻辑	39
3.2.6.	路由设计	41
3.2.7.	注释设计	41
3.3.	信息展示模块详细设计	41
3.3.1.	模块描述	41
3.3.2.	功能	41
3.3.3.	性能	41
3.3.4.	设计方法	42
3.3.5.	流程逻辑	42
3.3.6.	接口设计	42
3.3.7.	注释设计	43
3.4.	后台管理模块详细设计	43
3.4.1.	模块描述	43
3.4.2.	功能	43
3.4.3.	性能	43
3.4.4.	设计方法	43
3.4.5.	流程逻辑	43
3.4.6.	接口设计	44
3.4.7.	注释设计	44
3.5.	WEB服务端处理请求模块详细设计	44
3.5.1.	模块描述	44
3.5.2.	功能	44
3.5.3.	性能	45
3.5.4.	设计方法	45
3.5.5.	流程逻辑	45
3.5.6.	接口	45
3.5.7.	注释设计	46
附录3软件测试文档	47
1.	引言	47
1.1.	编写目的	47
1.2.	测试环境	47
1.3.	参考资料	47
2.	测试计划	48
2.1.	信息展示模块测试计划	48
2.2.	用户交互模块测试计划	49
2.3.	后台管理模块测试计划	51
2.4.	WEB服务端处理请求模块测试计划	52
3.	测试用例	53
3.1.	信息展示模块	53
3.1.1.	商品信息展示测试用例	53
3.1.2.	用户信息展示测试用例	54
3.1.3.	评论信息展示测试用例	54
3.2.	用户交互模块	55
3.2.1.	注册登录功能测试用例	55
3.2.2.	评论收藏购买功能测试用例	56
3.2.3.	信息修改功能测试用例	57
3.2.4.	商品搜索功能测试用例	57
3.3.	后台管理模块	58
3.3.1.	数据爬取功能测试用例	58
3.3.2.	用户管理功能测试用例	58
3.3.3.	管理员管理功能测试用例	59
3.4.	WEB服务端处理请求模块	59
3.4.1.	搜索请求处理测试用例	60
3.4.2.	注册登录请求处理测试用例	60
3.4.3.	评论或收藏请求处理测试用例	61
3.4.4.	数据爬取请求处理测试用例	61
4.	测试结果分析	62
附录4 用户文档说明书	63
1.	网站描述	63
2.	使用说明	63
2.1.	前台主要页面	63
2.2.	后台管理主要页面	67
2.3.	搜索查询页	68
2.4.	发表评论成功	69
附录5  源代码	71
1.	客户端部分	71
1.1.	注册登录核心代码	71
1.2.	商品事件核心代码	71
1.3.	商品收藏核心代码	71
1.4.	品牌评论核心代码	71
1.5.	信息修改核心代码	71
1.6.	用户管理核心代码	71
2.	WEB服务端部分	71
2.1.	WEB服务端路由核心代码	71
2.2.	商品评论页核心代码	71
2.3.	数据爬取核心代码	72
2.4.	其他控制器核心代码	72

 
1.	绪论
1.1.	项目背景
随着互联网的不断创新、发展和普及，网上购物越来越受到热捧。电子商务是电子信息和互联网技术结合厂商或其他交易主体之间进行的信息商务活动，而网上购物正是这种活动的表现形式之一。网上购物影响我们的生活越来越深。2015年11月11日，淘宝、天猫“双十一购物狂欢节”成交额高达912.17亿人名币，网上购物的用户越来越多。以淘宝为首的购物网站诸如京东、蘑菇街、聚划算等越来越庞大。
但是，网站的庞大意味着网站信息的复杂，这也导致用户在选择商品时越来越困难，甚至有很多杂乱的广告严重影响用户体验。而人们购物的选择则是基于物品的外观、价格和评价等，其中，商品的评论数据很大程度上影响着用户购买的选择。用户进入购物网站，看到商品，会浏览关于商品的评论，帮助自己分析，最后决定是否购买。但是，随着网络站点的大量增长，网络中的信息量逐渐增大，非常庞杂的信息使得用户在挑选自己满意的商品时显得非常麻烦，海量的商品信息让用户在选择时非常困难。为了解决用户购物要浏览大量信息而浪费掉大量时间的问题，解决用户查看评论信息不直观的问题，本网站利用网络爬虫爬取目标网站的商品信息，并对商品信息分类展示，爬取商品的主要评价数据，对评论数据进行图表化，提供给用户直观的可视化评价分析图，突出商品商品优缺点，以帮助用户进行选择，帮助用户区分商品是否值得购买，节约时间成本，提高整个购物的效率。本网站基于网络爬虫，拟用Node.js为语言技术，express为技术框架、MySQL存储数据，用Superagent爬取商品数据，数据真实有效，用Cheerio过滤并获取数据，用Canvas对数据以图表的方式可视化。最后网站在商品页给用户提供一个基于评论数据直观化的评论图表，以提升用户购物体验。
 Node.js是一个基于Chrome JavaScript运行时建立的平台， 用于方便地搭建响应速度快、易于扩展的网络应用。Node.js 使用事件驱动， 非阻塞I/O 模型而得以轻量和高效，非常适合在数据密集型的应用。以Node为服务则让网络爬虫系统实现起来意义非常，而它的功能库superagent和async更是让数据爬取更加便捷。
综上，通过Node.js开发一个界面美观，功能丰富的基于网络爬虫的商品评论网站，是方便网上购物用户的需要。对于网上购物者来说，这是件十分有意义的事。同时由于Node.js使用事件驱动， 非阻塞I/O 模型而得以轻量和高效的特点，使用Node.js开发一个基于网络爬虫的商品评论网站非常便捷和高效。
1.2.	国内外研究现状
国内外的购物网站，一般都是购物之后对商品进行简单评论，评论内容就按时间顺序显示在商品下方，没有把相关数据进行分析，用更直观的方式展示评论。国外网站诸如亚马逊、Amazon、Yoox、eLUXURY  LVMH，国内网站诸如淘宝，天猫，拍拍等皆是如此。当然，除了这些购物网站，还有很多导购网站,而导购网站的模式各不相同。有如下模式：
对比价格模式 ：国外有以PriceGrabber、Shopping为代表，国内则有如聪明点、一比二购为代表的网站，这类网站收集各个购物网站产品价格进行对比，同时提供产品价格走势。
购买返现模式 ：国外有以FatWallet为代表，国内有以易购网、特价王为代表的网站。这类网站用户通过该门户进入相应的购物网站，在购物后获取返现。这类网站主要和各个购物网站达成返现比例提成的方式来进行营利，其本身主要是各个购物网站的入口。
论坛信息+首页模式 ：国外有以DealSea、SlickDeals为代表，国内有以我爱打折网、上海打折网为代表的网站。这类网站用户通过论坛发布折扣信息，然后在首页按照时间和人气进行排序限时折扣信息列表。这类网站很多折扣信息由自己网站和其他合作伙伴进行发布。
社会购物模式 ：国外有边以Kaboodle、CrowStrom为代表，国内有以逛、蘑菇街、折800为代表的网站。这类建立在人们喜欢Social Shopping的感觉，随着社会购物能力的增大，发展也越好。
为了方便消费者从海量的商品中快速挑选到合适的产品，并基于这个商品有一个直观化的评论数据表，我们决定搭建一个商品评论导购网站，帮助用户进行商品选择。本网站基于网络爬虫，爬取网站对商品的热门评论，对评论进行分析，帮助用户节约人力、时间。而Node.js 使用事件驱动， 非阻塞I/O 模型而得以轻量和高效，非常适合在数据密集型的应用。以Node为服务则让网络爬虫系统实现起来意义非常，而它的功能库superagent和async更是让数据爬取更加便捷。
通过Node.js开发一个界面美观，功能丰富的基于网络爬虫的商品评论网站，是方便网上购物用户的需要。对于网上购物者来说，这是件十分有意义的事。同时由于Node.js使用事件驱动， 非阻塞I/O 模型而得以轻量和高效的特点，使用Node.js开发一个基于网络爬虫的商品评论网站非常便捷和高效。
1.3.	项目主要工作
	本网站的设计是为了解决用户由于非常庞杂的商品信息量使得用户在购买商品时显得非常麻烦，浏览各种商品信息和商品评论信息耗费大量时间和人力的问题而搭建的基于网络爬虫的商品评论网站。用户浏览本网站的基于评论数据的直观化的商品评论图表，有的放矢，能很快的了解到这个商品的信息，节约时间成本。
本文主要介绍了如何基于Node.js开发一个基于网络爬虫的商品评论导购网站。包括如何利用Express框架设计一个前端展示商品信息网站，如何利用Superagent爬取目标网站商品评论数据，如何利用Cheerio过滤并获取数据，如何基于数据用Canvas展示评论图表，如何有效的使用Node的请求路由机制来进行系统各个模块之间的设计、如何实现前端与后端的沟通。
论文的主要工作集中在以下几个方面：
1)	整个系统的设计，系统各个模块的设计。
2)	系统实现的理论基础以及相关的页面设计。
3)	爬取目标网站商品信息。
4)	过滤并获取有效数据。
5)	对数据进行直观化展示。
6)	系统的测试工作。
1.4.	报告组织与结构
第一部分：绪论。主要介绍购物网站的基于爬虫系统的导购网站的背景，以及相关领域的国内外研究情况。
第二部分：介绍基于Node.js的网络爬虫系统开发过程当中会用到的一些关键性的技术和知识，方便系统开发和实现部分的阅读与理解。 
第三部分：基于Node.js网络爬虫系统的商品评论网站的开发和实现细节，是本报告的主体部分。 包括了系统的整体框架、模块定义、功能分配、系统各个模块的设计思想、重要功能的逻辑流程以及模块的接口设计等。就设计思路方面阐述了第二部分的知识理论如何在本系统中有效的利用。
第四部分：基于Node.js网络爬虫系统的商品评论网站的测试。这部分针对系统的各个模块设计出了测试用例，并通过表格的形式反映系统各个功能的测试结果。
第五部分：对基于Node.js网络爬虫系统的商品评论网站开发工作的评价。
第六部分：总结部分，就本网站的完成情况与不足，结合值得完善的地方作出总结，阐述下一步的计划。 
 
2.	项目涉及的相关知识和技术简介
2.1.	Node.js简介
Node.js是一个基于Chrome JavaScript运行时建立的平台， 用于方便地搭建响应速度快、易于扩展的网络应用。Node.js 使用事件驱动， 非阻塞I/O 模型而得以轻量和高效，非常适合在分布式设备上运行的数据密集型的实时应用。Node采用一系列“非阻塞”库来支持事件循环的方式。本质上就是为文件系统、数据库之类的资源提供接口。向文件系统发送一个请求时，无需等待硬盘（寻址并检索文件），硬盘准备好的时候非阻塞接口会通知Node。该模型以可扩展的方式简化了对慢资源的访问，直观，易懂。Node.js是一个Javascript运行环境(runtime)。实际上它是对Google V8引擎进行了封装。V8引 擎执行Javascript的速度非常快，性能非常好。Node对一些特殊用例进行了优化，提供了替代的API，使得V8在非浏览器环境下运行得更好。
Nodejs事件驱动、非阻塞I/O这种方式能很好的提高性能。随着Nodejs的不断发展、Nodejs渐渐演变成一种构建网络应用的基础框架。并发展为一个不共享任何资源的单线程、单进程系统，但包含了很适合网络的库，这样Nodejs就为构建大型分布式应用提供了基础设施。他们的目标都是为了构建快速、可伸缩的网络应用平台。它自身非常简单、采用通信协议来组织许多的Node，非常容易通过拓展来达成构建大型网络应用的目的。Node.js可以在不新增额外线程的情况下，依然可以对任务进行并行处理，因为Node.js是单线程的。它通过事件轮询（event loop）来实现并行操作，对此，要充分利用这一点,那就是尽可能的避免阻塞操作，取而代之，多使用非阻塞操作。
2.2.	Node.js的事件机制简介
Node.js中大部分的模块，都继承自Event模块。Event模块（events.EventEmitter）是一个简单的事件监听器模式的实现。具有addListener/on，once，removeListener，removeAllListeners，emit等基本的事件监听模式的方法实现。它与前端DOM树上的事件并不相同，因为它不存在冒泡，逐层捕获等属于DOM的事件行为，也没有preventDefault()、stopPropagation()、 stopImmediatePropagation() 等处理事件传递的方法。
Node.js能够在众多的后端JavaScript技术之中脱颖而出，正是因其基于事件的特点而受到欢迎。拿Rhino来做比较，可以看出Rhino引擎支持的后端JavaScript摆脱不掉其他语言同步执行的影响，导致JavaScript在后端编程与前端编程之间有着十分显著的差别，在编程模型上无法形成统一。在前端编程中，事件的应用十分广泛，DOM上的各种事件。在Ajax大规模应用之后，异步请求更得到广泛的认同，而Ajax亦是基于事件机制的。
而事件侦听器模式也是一种事件钩子（hook）的机制，利用事件钩子导出内部数据或状态给外部调用者。Node.js中的很多对象，大多具有黑盒的特点，功能点较少，如果不通过事件钩子的形式，对象运行期间的中间值或内部状态，是我们无法获取到的。这种通过事件钩子的方式，可以使编程者不用关注组件是如何启动和执行的，只需关注在需要的事件上即可。
2.3.	Express框架简介
Express是一个基于Node.js平台的极简、灵活的 web 应用开发框架，它提供一系列强大的特性，可以创建各种Web和移动设备应用。丰富的HTTP快捷方法和任意排列组合的Connect中间件，让创建健壮、友好的API变得既快速又简单。Express不是对node.js 已有的特性进行二次抽象，我们只是在它之上扩展了Web应用所需的功能。Express的注册模板引擎的 callback 用来处理ext扩展名的文件默认情况下, 根据文件扩展名require() 对应的模板引擎。
2.4.	Express请求机制简介
客户端发起请求，然后web服务端进行处理，最后返回相关数据。客户端要发起请求，首先需要一个标识，通常情况下是URL，通过这个标识将请求发送给web服务端的某个具体处理程序，在这个过程中，请求可能会经历一系列全局处理，比如验证、授权、URL解析等，然后定位到某个处理程序进行业务处理，最后将生成的数据返回客户端，客户端将数据结合视图模版呈现出合适的样式。从客户端请求到web服务端端处理程序的过程，也就叫做路由，其实就是如何定位到web服务端处理程序的过程。我们会在后文中继续从代码层分析Express路由。
2.5.	Superagent简介
SuperAgent是一个小的客户端的HTTP请求库，并同样运行在Node.js的模块，有许多高级HTTP客户端功能。SuperAgent在爬取网页方面是一个能手，通过它的get方法可以获取到对应的URL的内容，加上一些库比如Cheerio的方法，可以很便捷的获取到网页中想要的数据。后面会在代码中对Superagent更深入的探索。
 
3.	系统设计与开发
3.1.	项目概况
本系统为windows环境下基于Node.js开发的一个基于网络爬虫系统的商品评论网站。整个系统由客户端和web服务端两个部分组成。web服务端部署于Node上，客户端的开发和测试以及web服务端的搭建都在Windows系统上进行，拟用Node.js为语言技术，express为技术框架、MySQL存储数据，用Superagent爬取商品数据，数据真实有效，用Cheerio过滤并获取数据，用Canvas对数据以图表的方式可视化。最后网站在商品页给用户提供一个基于评论数据直观化的评论图表，直观的反应出该商品的优劣。并在客户端展示该产品的评论信息，以供用户更加深入的进行判断。web服务端部分则需要支持整个网站的运营以及后台管理，数据爬起等。
3.2.	概要设计
3.2.1.	系统结构设计
本系统包括客户端和web服务端。客户端主要划分成3个模块：用户交互模块、信息展示模块和后台管理模块。web服务端主要用于处理客户端的请求，统一为一个模块：web服务端处理请求模块。每个模块包含了相应的功能点，整个系统的结构如图3.1：
 
图3.1系统结构图
用户交互模块是客户端的一部分，其中，用户注册登录、信息修改、网页跳转、商品搜索、品牌评论、收藏商品、点击购买等都是通过点击页面上相应的功能按钮来发送请求获取新的页面；信息展示模块主要对爬取到的数据以及后台数据进行可视化，品牌展示模块对数据进行分类集中展示；后台管理模块的用户管理是管理员对网站用户以及其他管理员的管理功能模块，数据爬取是管理员通过点击相应的功能按钮触发对目标网站数据进行爬取的功能模块。
整个系统的操作流程如图3.2：
 
图3.2系统操作流程图
3.2.2.	用户交互模块概要设计
功能：从大体上来分，用户交互模块包括用户注册登录、信息修改、网页跳转、商品搜索、品牌评论、收藏商品、点击购买7个功能。具体如图3.3：
 
图3.3用户交互模块功能结构图
输入：模块的输入为用户对相应功能按钮的点击事件。
输出：模块的输出是由PC网站展示出来的响应页面。
接口：使用URL或AJAX的GET/POST方法进行参数传递。
3.2.3.	信息展示模块概要设计
功能：信息展示模块为系统的主要部分，根据用户输入或者点击跳转的url的不同，对不同分类的商品信息进行展示。主要包括商品信息展示、评论信息展示、用户信息展示、品牌信息展示。具体如图3.4：
 
图3.4信息展示模块功能结构图
输入：模块的输入为用户对相网页的URL输入或跳转链接点击事件。
输出：模块的输出为web服务端返回的数据可视化后的页面。
接口：通过网络套接口传递数据。
3.2.4.	后台管理模块概要设计
功能：后台管理模块主要是有管理员身份的用户对网站的普通用户以及其他管理员的管理等。数据爬取是有管理员身份的用户点击相应功能按钮触发事件，对目标网站进行数据爬取，并存入数据库，等待客户端请求数据。具体如图3.5：
 
图3.5后台管理模块功能结构图
输入：模块的输入为登录用户为管理员并有相应功能按钮触发的事件。
输出：操作管理后的页面以及存入数据库的数据。
接口：使用URL或AJAX的GET/POST方法进行参数传递。
3.2.5.	web服务端处理请求模块概要设计
功能：web服务端处理请求模块主要是处理来自客户端的不同请求。如图3.6：
 
图3.6 web服务端处理请求模块功能结构图
输入：来自客户端的请求。
输出：对客户端请求的反馈。
接口：通过网络套接口传递数据。
3.2.6.	模块功能关系
这里列出整个系统的功能和模块之间的分配关系，为系统的功能分配提供一个总览。具体见表3.1：
表3.1模块功能关系表
功能点	用户交互模块	信息展示模块	后台管理模块	web服务端请求处理模块
注册登录				
信息修改				
网页跳转				
商品搜索				
品牌评论				
收藏商品				
点击购买				
商品信息展示				
评论信息展示				
用户信息展示				
品牌信息展示				
数据爬取				
用户管理				
请求处理				
3.3.	详细设计
3.3.1.	用户交互模块详细设计
1)	功能定义：
用户交互应该实现的功能和对功能的定义如表3.2所示。需要注意用户评论、收藏、购买等交互需要用户状态为已登录为前提。用户注册需要判断用户名是否已经存在，信息是否符合规范；用户登录需要判断密码是否符合，后台管理及数据爬取需要用户身份为管理员：
表3.2用户交互模块功能定义表
编号	功能点	功能点详细内容
USER_REG	注册	判断新用户信息是否符合规范，写入新用户信息
USER_LOG	登录	判断用户是否存在，改变网站状态为登录状态
USER_COMM	评论	判断评论信息是否符合规范，写入新评论数据并展示
USER_COLL	收藏	判断是否登录，写入新收藏商品信息
USER_BUY	购买	判断是否登录，跳转至购买页面
USER_CRAW	爬取数据	判断用户是否为管理员，爬取数据写入数据库
USER_ADMIN	管理用户	删除用户，增删管理员
USER_MOD	信息修改	用户登录状态下修改用户密码
USER_GO	网页跳转	用户点击功能按钮URL跳转，响应相应页面
USER_SEARCH	搜索	用户输入关键字，响应相应页面
2)	性能要求
本模块是系统的基础模块，包含了一系列的用户操作。为了呈现较好的用户体验，要求页面跳转流畅进行，并且页面动画能够十分顺畅自如。商品信息准确无误，不会出现超时延迟。
3)	设计方法
该模块的核心是Node路由的跳转，以及AJAX实现无刷新请求，对用户的操作进行请求前和请求后的响应。
路由跳转：用户输入的URL或者用户点击的跳转链接的URL，后端获取链接，并由路由分发至各自的控制器，控制器输出渲染的模板页面，最终生成页面反馈给用户。
AJAX无刷新请求：AJAX无刷新请求，用户点击功能按钮触发事件，通过AJAX的GET/POST方法传递数据到web服务端，web服务端根据请求的路径路由分发各自的控制器，由控制器与数据库进行交流并产出反馈，最终反馈给AJAX，客户端根据返回的结果做出对应的页面交互。
总的来说，该模块的设计思想就是接收用户请求，路由分发控制器，作出回应，AJAX实现异步请求，请求成功后发送信号用户交互页面。
4)	逻辑流程
	注册逻辑流程
用户进入注册页面，填写信息，模块会判断用户填写信息是否符合规范，并同时向后台请求用户名是否已经存在。当用户名不存在且用户所有信息符合规范后，向web服务端发送请求将信息加入数据库。如图3.7：
 
图3.7注册逻辑流程图
	登录逻辑流程
用户进入登陆页，填写信息，模块会判断用户填写信息是否符合规范，符合规范则向web服务端发送请求将验证用户名密码是否正确，正确则改变网站状态为用户登录状态。如图3.8：
 
图3.8登录逻辑流程图
	信息修改逻辑流程
用户状态为已登录，进入信息修改页，点击功能按钮触发事件。模块会判断用户填写信息是否符合规范，web服务端会判断用户原始密码是否正确，符合规范则向web服务端发送请求将用户信息更新。如图3.9：
 
图3.9信息修改逻辑流程图
	评论逻辑流程
用户状态为已登录，进入评论页，输入评论信息，模块会判断输入信息是否符合规范，符合规范则允许用户进行下一步，用户点击功能按钮触发事件。模块向web服务端发送请求将用户评论信息写入数据库，并实时展示在页面。如图3.10：
 
图3.10评论逻辑流程图
	搜索逻辑流程
用户输入关键词，点击功能按钮触发事件，模块向web服务端发送请求，将请求到的数据返回给页面，页面将数据信息展示出来。如图3.11：
 
图3.11搜索逻辑流程图
	收藏逻辑流程
点击功能按钮触发事件，模块会判断用户是否为登录状态并对非登录状态作出提示。如果为已登录状态，模块会向web服务端发送请求将用户收藏的商品信息写入数据库。如图3.12：
 
图3.12收藏逻辑流程图
	点击购买逻辑流程
用户点击功能按钮触发事件，模块会跳转至相应商品购买页面。如图3.13：
 
图3.13点击购买逻辑流程图
5)	接口设计
系统4个模块的接口的设计都遵循Node的请求路由设计规范，通过use/get/post等方法获取链接，分发控制路由，而对于模块类的成员尽可能的设计为私有，保证了良好的封装性，user提供用户交互的接口，通过export向外提供访问。
3.3.2.	信息展示模块详细设计
1)	功能定义
信息展示模块为系统的主要部分，根据用户输入或者点击跳转的url的不同，对不同分类的商品信息进行展示。主要包括商品信息展示、评论信息展示、用户信息展示、品牌信息展示，表3.3是对功能的定义:
表3.3信息展示模块功能定义表
序号	功能点			功能点详细内容
INFO_DEAL	根据URL跳转页面	判断数据是否存在并展示不同页面
INFO_COMM	根据URL跳转页面	判断数据是否存在并展示不同页面
INFO_USER	根据URL跳转页面	判断用户登录状态并展示不用页面
INFO_BRAND	根据URL跳转页面	跳转并展示页面
2)	性能要求
信息展示模块是系统的基础模块之一，为了呈现较好的用户体验，要求页面跳转流畅进行。商品信息准确无误，不会出现超时延迟。
3)	设计方法
信息展示模块的核心是Node路由的跳转，在客户端要做出请求失败，请求数据暂无状态的反馈页面：
请求正常：快速响应页面，展示商品信息准确无误。
请求失败：显示友好的404页面，并提供正确的跳转链接。
请求数据暂无：显示友好的提示信息页面。并提供正确的跳转链接。
4)	逻辑流程
	商品信息展示逻辑流程
用户输入URL或者点击跳转链接，模块发送请求，客户端根据返回数据显示不同页面。具体流程如图3.14：
 
图3.14商品信息展示逻辑流程图
	评论信息展示逻辑流程
用户输入URL或者点击跳转链接，模块判发送请求，客户端根据返回数据显示不同页面。具体流程如图3.15：
 
图3.15评论信息展示逻辑流程图
	用户信息展示逻辑流程
用户输入URL或者点击跳转链接，模块判断用户为登录状态则发送请求，客户端根据返回数据显示不同页面。具体流程如图3.16：
 
图3.16用户信息展示流程图
	品牌信息展示逻辑流程
用户输入URL或者点击跳转链接，模块判发送请求，客户端根据返回数据显示不同页面。具体流程如图3.17：
 
图3.17品牌信息展示逻辑流程图
5)	接口设计
该模块接口的设计遵循Node的请求路由设计规范，分发路由至控制器，deal和index提供信息展示的接口，通过export向外提供访问。
3.3.3.	后台管理模块详细设计
1)	功能定义
后台管理模块主要是提供管理员管理网站用户，爬取模板网站数据并写入本地，具体功能的定义如表3.4：
表3.4后台管理模块功能定义表
序号	功能点	功能点详细内容
ADMIN_USER	管理用户，设置管理员	增删管理员，删除用户等
ADMIN_CRAW	数据爬取	爬取目标网站商品信息写入数据库
2)	性能要求
本模块需要爬取数据准确无误，管理信息修改准确无误，商品信息修改及时生效，在正确的前提上逐步提升性能。
3)	设计方法
本模块主要为爬取数据，管理网站用户。具体如下：
数据爬取：通过Node库Superagent对目标网站进行数据爬取，通过Cheerio对数据进行过滤并最终存入数据库。
用户管理：对数据的增删查改。
4)	逻辑流程
	数据爬取逻辑流程
管理员点击功能按钮触发事件，模块向web服务端发送请求，并开始对数据进行爬取、过滤，存入数据库，爬取成功则返回成功的信息。具体流程如图3.18：
 
图3.18数据爬取逻辑流程图
	用户管理逻辑流程
管理员对普通用户进行删除或者设置为管理员操作，超级管理员对普通管理员进行设为普通用户操作，模块发送请求至web服务端，web服务端操作数据后返回成功信息。具体流程如图3.19：
 
图3.19用户管理逻辑流程图
5)	接口设计
该模块接口的设计遵循Node的路由设计规范，分发路由至控制器，Star提供数据爬取的接口，通过export向外提供访问。
3.3.4.	web服务端处理请求模块详细设计
1)	功能定义
该模块接收客户端数据传输模块的请求并给予反馈，由于客户端要求实现用户注册登录、信息修改、网页跳转、商品搜索、品牌评论、收藏商品、点击购买、数据爬取、用户管理等功能，因此该模块要求完成搜索处理、数据处理、路由分发、结果反馈等功能。功能定义如表3.5：
表3.5web服务端处理请求模块功能定义表
序号	功能点	功能点详细内容
SERV_SEARCH	搜索处理	从接收到的请求提取搜索关键字，搜索数据库并反馈
SERV_DATA	数据处理	从接收到的请求判断增删查改
SERV_ROUTE	请求路由分发	从接收到的请求分发请求路由至各控制器
2)	性能要求
该模块为系统的web服务端部分，需要处理来自客户端的请求。基本要求是web服务端能识别来自客户端的各种请求并给出正确的回应。能够在可接受的时间范围内对客户端请求作出回应。
3)	设计方法
web服务端的设计采用Node.js 事件驱动， 非阻塞I/O 模型得以轻量和高效。就具体功能来说，设计如下：
搜索请求处理：当接收到客户端的请求后，解析出查询的关键词并对之进行处理，调用数据库访问接口，传入sql语句进行查询，然后传回封装好的查询结果，最后回传到客户端。
数据请求处理：对于用户注册登录、信息修改、品牌评论、收藏商品、数据爬取、用户管理等请求，同样，先解析接收到的请求信息，连接数据库查询，将结果进行封装后传回。
请求路由分发：网站各不同请求分发至不同的控制器进行处理，并对处理的结果返回至相应的客户端。
4)	逻辑流程
	搜索请求处理逻辑流程：
web服务端解析出查询的关键词并对之进行处理，调用数据库访问接口，传入sql语句进行查询，然后传回封装好的查询结果，最后回传到客户端。流程如图3.21：
 
图3.20搜索请求处理逻辑流程图
	数据请求处理逻辑流程：
解析接收到的请求信息，连接数据库查询，将结果进行封装后返回给客户端。如图3.22：
 
图3.21数据请求处理逻辑流程图
	请求路由分发逻辑流程：
分发不同请求至不同的控制器进行处理，并对处理的结果返回至相应的客户端。流程如图3.23：
 
图3.22请求路由分发逻辑流程图
5)	接口设计
Route为web服务端主要模块，分发请求路由。Model提供数据库方法，Mysql用于连接数据库。
3.4.	本章小结
本章根据系统的需求，从概要设计到详细设计逐步详述整个系统的模块关系，并对每个模块的功能作出了要求、以及阐述了系统重要功能的算法设计思想和逻辑流程，最后给出了各模块中的路由接口，基本上已经涵盖了系统的各个部分。系统的编码就是基于这部分的工作来完成的。
 
4.	测试与验证
本章就系统的4个模块设计出测试用例并逐一进行测试，测试结果通过4.1的测试截图和4.2各个表中的测试状态来反应。
4.1.	测试效果
测试环境为Chrome浏览器，版本号为49.0.2623.110。
4.1.1.	首页运行效果
图4.1为客户端首页部分运行效果，其中红框内为爬取的商品信息数据展示：
 
图4.1 首页运行效果图
4.1.2.	评论图表运行效果
图4.2为客户端部分评论图表运行效果图，其中：
 
图4.2 IE下运行效果图
4.1.3.	商品详情页运行效果：
图4.3为客户端商品详情页部分运行效果，其中：

 
图4.3 firfox下运行效果图
4.2.	信息展示模块测试
4.2.1.	商品信息展示测试用例
这里对网站商品信息展示的各种状态和各种交互效果进行测试用例编写，具体如表4.1：
表4.1商品信息展示测试用例表
测试用例ID	Info1
测试用例名称	商品信息展示
前提条件	无
操作	预期结果	实际结果	测试状态
打开页面URL	展示顶部栏，导航栏，商品，左侧栏、banner幻灯片、分享栏、底部等 	展示顶部栏，导航栏，商品，左侧栏、banner幻灯片、分享栏、底部	PASS
导航栏hover	导航栏hover有效果	导航栏hover有效果	PASS
登录注册hover	登录注册hover为红色且可点击	登录注册hover为红色且可点击	PASS
Logo hover	Logo hover时显示的url为主页	Logo hover时显示的url为主页	PASS
左侧导航hover	左侧导航hover有红色下划线且可点击	左侧导航hover有红色下划线且可点击	PASS
右侧分享栏hover	右侧分享栏hover出现分享选择框	右侧分享栏hover出现分享选择框	PASS
商品hover	商品hover出现红色边框	商品hover出现红色边框	PASS
商品名称hover	商品名称hover显示全名	商品名称hover显示全名	PASS
下滑或下拉滚动条	网站下滑一定距离后出现跟随导航，回顶部图标，点击缓慢回顶部，左侧导航和右侧分享跟随滑动	网站下滑一定距离后出现跟随导航，回顶部图标，点击缓慢回顶部，左侧导航和右侧分享跟随滑动	PASS
搜索框聚焦	搜索框聚焦有边框出现	搜索框聚焦有边框出现	PASS
登录	左侧导航显示我的收藏和账号信息，hover有红色下划线	左侧导航显示我的收藏和账号信息，hover有红色下划线	PASS
hover商品图片和进入评论页	商品图片和进入评论页可点击	商品图片和进入评论页可点击	PASS
hover幻灯片	幻灯片切换正常	幻灯片切换正常	PASS
评论页商品hover	评论页商品大图可点击	评论页商品大图可点击	PASS
收藏商品hover	收藏商品hover时出现删除收藏按钮	收藏商品hover时出现删除按钮	PASS
没有收藏商品	没有收藏商品时显示无收藏的页面	没有收藏商品时显示无收藏的页面	PASS
4.2.2.	用户信息展示测试用例
这里对用户信息展示的各种状态和各种交互效果进行测试用例编写，具体见表4.2：
表4.2用信息展示测试用例表
测试用例ID	Info2
测试用例名称	用户信息展示
前提条件	登录状态
操作	预期结果	实际结果	测试状态
点击进入个人信息页	响应页面，信息正确，没有左侧导航栏	响应页面，信息正确，没有左侧导航栏	PASS
左侧栏hover	左侧栏hover时有灰色效果	左侧栏hover时有灰色效果	PASS
点击左侧栏	当前所在栏呈现灰色背景	当前所在栏呈现灰色背景	PASS
点击修改密码	响应页面，出现可填写框，提交按钮	响应页面，出现可填写框，提交按钮	PASS
4.2.3.	评论信息展示测试用例
这里对评论信息展示的各种状态和各种交互效果进行测试用例编写。具体见表4.3：
表4.3评论信息展示测试用例表
测试用例ID	Info3
测试用例名称	歌词解析
前提条件	无
操作	预期结果	实际结果	测试状态
点击进入商品评论页	显示评论页面正常	显示评论页面正常	PASS
评论页下滑查看评论图表	评论图标正常	评论图标正常	PASS
评论页评论图表hover	评论图表hover每一个角显示各自的名称和数据	评论图表hover每一个角显示各自的名称和数据	PASS
评论页下滑至下方评论信息	评论信息显示无错乱	评论信息显示无错乱	PASS
评论页查看更多评论hover	评论页查看更多评论hover红色可点击	评论页查看更多评论hover红色可点击	PASS
点击进入品牌介绍页	介绍页显示正常无错乱	介绍页显示正常无错乱	PASS
查看评论信息	评论信息正常展示	评论信息正常展示	PASS
专场链接hover	专场链接可点击	专场链接可点击	PASS
查看发布评论	未登录发表评论为灰色上方有小提示，登录状态为红色无提示	未登录发表评论为灰色上方有小提示，登录状态为红色无提示	PASS
查看评论信息时间	新发表的评论信息时间在前面	新发表的评论信息时间在前面	PASS

4.3.	用户交互模块测试
4.3.1.	注册登录功能测试用例
这里对注册登录的各种状态和各种交互效果进行测试用例编写。具体如表4.4：
表4.4注册登录测试用例表
测试用例ID	User1
测试用例名称	注册登录
前提条件	无
操作	预期结果	实际结果	测试状态
点击注册	进入注册页面	进入注册页面	PASS
输入用户名	判断用户名规范，给出相应提示	判断用户名规范，给出相应提示	PASS
输入邮箱	判断邮箱规范，给出相应提示	判断邮箱规范，给出相应提示	PASS
输入密码	判断密码规范，给出相应提示	判断密码规范，给出相应提示	PASS
再次输入面膜	判断密码是否一样，给出提示	判断密码是否一样，给出相应提示	PASS
在没填完情况下点击注册	出现小提示	出现小提示	PASS
填好后点击注册	注册成功或失败都出现小提示并清空输入框	注册成功或失败都出现小提示并清空输入框	PASS
注册失败	提示注册失败请重试	提示注册失败请重试	PASS
注册成功	提示注册成功	提示注册成功	PASS
点击下方的去登录	动画切换到登陆页	动画切换到登陆页	PASS
点击登录	进入登录页面	进入登录页面	PASS
输入用户名	判断用户名规范，给出相应提示	判断用户名规范，给出相应提示	PASS
输入密码	判断密码规范，给出相应提示	判断密码规范，给出相应提示	PASS
点击登录	成功后出现成功提示，跳转至登录前的页面	成功后出现成功提示，跳转至登录前的页面	PASS
点击登录	失败后提示用户名或密码错误	失败后提示用户名或密码错误	PASS
点击去注册	动画跳转至注册页面	动画跳转至注册页面	PASS
4.3.2.	评论收藏购买功能测试用例
这里对评论功能的各种状态和各种交互效果进行测试用例编写，具体如表4.5：
表4.5评论收藏购买功能测试用例表
测试用例ID	User2
测试用例名称	评论收藏购买
前提条件	无
操作	预期结果	实际结果	测试状态
未登录状态下点击发布评论	上方出现提示信息：发表评论，请先登录	上方出现提示信息：发表评论，请先登录	PASS
登录状体下点击发布评论	判断用户输入内容不符合规范则作出提示	判断用户输入内容不符合规范则作出提示	PASS
输入框聚焦	原来的文字消失	原来的文字消失	PASS
输入文字	下方的剩余字数跟随变化	下方的剩余字数跟随变化	PASS
输入符合规范点击发表评论	成功后显示弹窗提示，弹框可点击关闭，并在下方实时生成评论，发表之后输入框清空	成功后显示弹窗提示，弹框可点击关闭，并在下方实时生成评论，发表之后输入框清空	PASS
刷新评论页面	最新评论排在最前面	最新评论排在最前面	PASS
点击进入商品评论页	进入页面，页面展示正常	进入页面，页面展示正常	PASS
点击收藏	未登录会提示请先登录，登陆了则展示收藏成功	未登录会提示请先登录，登陆了则展示收藏成功	PASS
点击购买	跳转至购买页面	跳转至购买页面	PASS
4.3.3.	信息修改功能测试用例
这里对信息修改功能的各种状态和各种交互效果进行测试用例编写，具体如表4.6：
表4.6信息修改功能测试用例表
测试用例ID	User3
测试用例名称	信息修改
前提条件	登录状态
操作	预期结果	实际结果	测试状态
点击密码修改	进入密码修改页面	进入密码修改页面	PASS
输入原始密码	判断密码规范，作出相应提示	判断密码规范，作出相应提示	PASS
输入新密码	判断密码规范，作出相应提示	判断密码规范，作出相应提示	PASS
再次输入密码	判断密码是否一样，作出提示	判断密码是否一样，作出提示	PASS
点击重新出入	输入框被清空	输入框被清空	PASS
点击修改	对修改结果做出提示，并把输入框清空	对修改结果做出提示，并把输入框清空	PASS
4.3.4.	商品搜索功能测试用例
这里对商品搜索功能的各种状态和各种交互效果进行测试用例编写，具体如表4.7：
表4.7商品搜索功能测试用例表
测试用例ID	User4
测试用例名称	商品搜索
前提条件	无
操作	预期结果	实际结果	测试状态
搜索框聚焦	搜索框外层出现边框	搜索框外层出现边框	PASS
输入关键词点击搜索	跳转至搜索结果页	跳转至搜索结果页	PASS
没有搜索结果	展示没有搜索结果的友好界面	展示没有搜索结果的友好界面	PASS
搜索成功	展示搜索到的商品	展示搜索到的商品	PASS

4.4.	后台管理模块测试
4.4.1.	数据爬取功能测试用例
这里对商品搜索功能的各种状态和各种交互效果进行测试用例编写，具体如表4.8：
表4.8数据爬取功能测试用例表
测试用例ID	Admin1
测试用例名称	数据爬取
前提条件	登录用户为管理员
操作	预期结果	实际结果	测试状态
点击进入管理后台	页面显示正常无紊乱	页面显示正常无紊乱	PASS
点击数据爬取	跳转至数据爬取页面	跳转至数据爬取页面	PASS
点击对应类商品数据爬取功能按钮	控制台显示出正在爬取并存入数据库的信息，爬取结束弹框提示爬取成功	控制台显示出正在爬取并存入数据库的信息，爬取结束弹框提示爬取成功	PASS
4.4.2.	用户管理功能测试用例
这里对用户管理功能的各种状态和各种交互效果进行测试用例编写，具体见表4.9：
表4.9用户管理功能测试用例表
测试用例ID	Admin2
测试用例名称	用户管理
前提条件	登录用户为管理员
操作	预期结果	实际结果	测试状态
点击进入用户设置	页面显示网站用户信息	页面显示网站用户信息	PASS
用户信息hover	hover时出现可点击按钮	hover时出现可点击按钮	PASS
点击删除用户	用户在此页面的信息实时删除，刷新后也没有删除用户的信息	用户在此页面的信息实时删除，刷新后也没有删除用户的信息	PASS
点击设置管理员	用户在此页面的信息实时删除，在管理员设置页面出现刚刚设置的管理员信息	用户在此页面的信息实时删除，在管理员设置页面出现刚刚设置的管理员信息	PASS
4.4.3.	管理员管理功能测试用例
这里对管理员管理功能的各种状态和各种交互效果进行测试用例编写，具体见表4.10：
表4.10管理员管理功能测试用例表
测试用例ID	Admin3
测试用例名称	管理员管理
前提条件	登录用户为超级管理员
操作	预期结果	实际结果	测试状态
点击进入管理员设置	跳转至管理员设置页面	跳转至管理员设置页面	PASS
管理员信息hover	hover时出现可点击按钮	hover时出现可点击按钮	PASS
点击删除管理员	删除的管理员在此页面的信息实时删除，刷新后也没有删除管理员的信息	删除的管理员在此页面的信息实时删除，刷新后也没有删除管理员的信息	PASS
点击进入用户设置页面	在管理员设置页面删除的用户进入此页面	在管理员设置页面删除的用户进入此页面	PASS

4.5.	web服务端处理请求模块测试

该模块的测试主要是观察客户端模块的测试数据，被web服务端接收后，在解析、查询、反馈这些环节是否出错。
4.5.1.	搜索请求处理测试用例
这里对web服务端对搜索请求处理功能的测试用例编写，具体见表4.12：
表4.12搜索请求处理测试用例表
测试用例ID	Serv1
测试用例名称	搜索请求处理
前提条件	接收到客户端的搜索请求
输入	预期结果	实际结果	测试状态
客户端输入合理关键词搜索	正确解析出关键字，查询正确的表，得到正确的结果并封装了结果数据反馈给客户端	正确解析出关键字，查询正确的表，得到正确的结果并封装了结果数据反馈给客户端	PASS
客户端输入不合理关键词搜索	正确解析出歌手名关键字，查询正确的表，没有得到结果则返回空值给客户端	正确解析出歌手名关键字，查询正确的表，没有得到结果则返回空值给客户端	PASS
4.5.2.	注册登录请求处理测试用例
这里对web服务端对注册登录请求处理功能的测试用例编写，信息修改，用户管理等同理。具体见表4.13：
表4.13注册登录请求处理测试用例表
测试用例ID	Serv2
测试用例名称	注册登录请求处理
前提条件	接收到注册登录的请求
输入	预期结果	实际结果	测试状态
注册输入用户名	正确的解析用户名，查询正确的表，并返回用户名是否已存在的结果给客户端	正确的解析用户名，查询正确的表，并返回用户名是否已存在的结果给客户端	PASS
输入正确信息并点击注册	正确的解析用户名，邮箱，密码，插入正确的表，并返回成功的消息给客户端	正确的解析用户名，邮箱，密码，插入正确的表，并返回成功的消息给客户端	PASS
输入正确信息并点击登录	正确的解析用户名，密码，查询正确的表，并返回成功的消息给客户端	正确的解析用户名，密码，查询正确的表，并返回成功的消息给客户端	PASS
信息修改填入正确信息便点击修改	正确的解析原始密码，查询正确的表，插入数据到正确的表，并返成功是否给客户端	正确的解析原始密码，查询正确的表，插入数据到正确的表，并返成功是否给客户端	PASS
对用户进行删除或设置管理员	正确的解析用户信息，查询并更新正确的表，并返回成功是否给客户端	正确的解析用户信息，查询并更新正确的表，并返回成功是否给客户端	PASS
正确输入商品信息并点击修改	正确的解析商品信息，查询正确的表，更新数据，并返成功是否给客户端	正确的解析商品信息，查询正确的表，更新数据，并返成功是否给客户端	PASS
4.5.3.	评论或收藏请求处理测试用例
这里对web服务端对评论或收藏请求处理功能的测试用例编写。具体见表4.14：
表4.14评论或收藏请求处理测试用例表
测试用例ID	Serv3
测试用例名称	评论、收藏
前提条件	接收到评论或收藏请求
输入	预期结果	实际结果	测试状态
正确输入评论信息并点击发布评论	正确的解析评论内容，评论人信息，评论时间，插入数据正确的表，并返成功是否给客户端	正确的解析评论内容，评论人信息，评论时间，插入数据正确的表，并返成功是否给客户端	PASS
点击收藏	正确的解析商品信息，收藏人信息，插入数据正确的表，并返成功是否给客户端	正确的解析商品信息，收藏人信息，插入数据正确的表，并返成功是否给客户端	PASS
4.5.4.	数据爬取请求处理测试用例
这里对web服务端对评论或收藏请求处理功能的测试用例编写。具体见表4.15：
表4.15数据爬取请求处理测试用例表
测试用例ID	Case4
测试用例名称	数据爬取请求处理
前提条件	接收到数据爬取请求
输入	预期结果	实际结果	测试状态
点击爬取数据	爬取目标网站数据并存入正确的数据库，并返回成功与否给客户端。	爬取目标网站数据并存入正确的数据库，并返回成功与否给客户端。	PASS

4.6.	本章小结
本章通过对系统各个模块的测试发现，系统的各个模块运转良好，用户行为引起的系统动作都在预计范围内，整个系统已经顺利完成需求中所要求的各项功能。
 
5.	评价
5.1.	对项目开发过程的体会
5.1.1.	过程总结
该项目开始于2015年11月，当时刚进入成都一家公司实习，边学习边做毕设。后来实习工作多了些，该项目的一些界面便设计得比较粗糙，功能也设计的不完善。实习结束后，开始对这个项目重塑，并把在公司学习的Node知识运用在这个项目上作为后端处理模块。
项目开发的工作主要分为“确定需求”、“界面设计”“详细设计”、“编码实现”、“测试”四个阶段。其中“确定需求”与“详细设计”占用了项目开发的大多时间，而“编码实现”所用时间较短，测试和修改bug的时间相对长一点。由于在开发过程中，对文档格式，编码规范给予了较高的重视，因此为后续项目的修改与完善奠定了良好的基础。
5.1.2.	出现的问题及解决
项目开发过程中数据爬取的地方遇到一些阻碍，最初的设计是爬取任一网站的数据，然后从这些数据中过滤。但是实现过程中发现部分厂商在防爬虫方面做得特别好，因此改成爬取专门的商品，并对商品进行分类。另外，在项目开发中，浏览器兼容也是遇到的难题之一，在研究了JQuery的一些方法以及搜索了各种方法后，解决了网站的大部分兼容性。
5.2.	对项目的评价
项目基于Node开发，同时使用Express框架，Node.js是一个基于Chrome JavaScript运行时建立的平台， 用于方便地搭建响应速度快、易于扩展的网络应用。Node.js 使用事件驱动， 非阻塞I/O 模型而得以轻量和高效，非常适合本项目。
从具体功能上来说，该项目整个的设计思想是基于评论的导购网站。因此网站的评论展示的功能让用户能够直观的看到产品的优缺点。网站的品牌评论功能更是让用户进入自己喜欢的品牌下查看同样喜欢这个品牌的人的评论信息，更能找到归属感，并提升用户购买体验。不过，不能将用户评论数据同步到其他电商网站，这是初步设计考虑不当的地方，也是需要达到商业协议才能做到的地方。下一步的改进是用户在评论可以实时互动，并把用户的评论以弹幕的方式展现在用户面前。
就性能方面来说，网站在开发时使用了雅虎前端优化十四条军规，使得系统具有良好的性能。
 
小结
由于时间和商业的关系，该项目还存在一些欠缺。一些设想没有时间去实现，一些想法没有商业支持去实现。如：同步用户功能到商品目标网站、对爬取到的评论信息进行大数据分析、直接用本网站的用户名去购买等等。这些可以作为系统后续功能扩展的一个参考和指引。
 
参考资料
[1].	李健．在线商品评论对产品销量影响研究．上海大学管理学院．第32卷第一期．2012.1．
[2].	JohnResig.精通JavaScript.人民邮电出版社.2008.4 ．
[3].	陆凌牛.《Node.js权威指南》.机械工业出版社,2014年4月．
[4].	朴灵.《深入浅出NodeJs》. 人民邮电出版社,2013年12月．
[5].	李战.悟透JavaScript.北京：电子工业出版社.2008.12．
[6].	赵坤，寸志，雷宗民，吴中骅 《NodeJs实战》2014年5月．
[7].	NodeJs API开发文档. https://nodejs.org/en/．
[8].	张逸.软件设计精要与模式［M］.第四版．
[9].	Express API开发文档 http://www.expressjs.com.cn.
[10].	MySQL数据库API文档. http://dev.mysql.com/doc．
[11].	Superagent API文档http://visionmedia.github.io/superagent.
[12].	Cheerio API文档 https://github.com/cheeriojs/cheerio．
 
致  谢
首先我在这里向养育和培养我的父母表示深深地思念和感谢，再向关心我，帮助我的老师和同学表示感谢！ 
能顺利圆满地完成我的设计，离不开自身的努力，离不开指导老师的指点，更离不开四川大学这个大环境四年来在学习和生活的熏陶和培养。
在做毕业设计的这几个月里，我得到了指导老师的关心和教导，老师在学术上的渊博知识让我在这几个月的学习和研究中深受其益。我向老师表示深深地谢意；再向和我进行讨论问题，让彼此相互帮助和学习工作的同学表示感谢；向软件学院实验室中，陪着我们度过几多光阴的管理员和老师表示谢意；向我实习期间帮助我学习，帮助我解决问题的师父和同事表示感谢。
设计的完成，为我在川大的学习生涯画上了一个圆满的句号。在四川大学度过的美好时光将是我人生中最美好的回忆之一并使我终生受益。



作者签名：
2016年05月  日
指导教师签名：
2016年05月  日
 
附录1需求规格说明书
1.	引言
1.1.	编写目的
电子商务是电子信息和互联网技术结合厂商或其他交易主体之间进行的信息商务活动，而网上购物正是这种活动的表现形式之一。网上购物影响我们的生活越来越深。然而现代主流的播购物网站都具有十分丰富的界面和功能，但是还是有些不尽如人意的地方。因此，在借鉴其他主流导购网站已经十分完善的功能的基础上，开发出一款基于评论的导购网站具有一定的意义。
本文就将要开发的网站进行相应功能点的阐述。分析网站应该具备的功能点，以及引发功能点的行为，通俗的说，就是描述本系统可以做什么。项目预期读者为具有相关需求的用户。
1.2.	背景
随着互联网的不断创新、发展和普及，网上购物越来越受到热捧。电子商务是电子信息和互联网技术结合厂商或其他交易主体之间进行的信息商务活动，而网上购物正是这种活动的表现形式之一。网上购物影响我们的生活越来越深。2015年11月11日，淘宝、天猫“双十一购物狂欢节”成交额高达912.17亿人名币，网上购物的用户越来越多。以淘宝为首的购物网站诸如京东、蘑菇街、聚划算等越来越庞大。
但是，网站的庞大意味着网站信息的复杂，这也导致用户在选择商品时越来越困难，甚至有很多杂乱的广告严重影响用户体验。而人们购物的选择则是基于物品的外观、价格和评价等，其中，商品的评论数据很大程度上影响着用户购买的选择。用户进入购物网站，看到商品，会浏览关于商品的评论，帮助自己分析，最后决定是否购买。但是，随着网络站点的大量增长，网络中的信息量逐渐增大，非常庞杂的信息使得用户在挑选自己满意的商品时显得非常麻烦，海量的商品信息让用户在选择时非常困难。为了解决用户购物要浏览大量信息而浪费掉大量时间的问题，解决用户查看评论信息不直观的问题，本网站利用网络爬虫爬取目标网站的商品信息，并对商品信息分类展示，爬取商品的主要评价数据，对评论数据进行图表化，提供给用户直观的可视化评价分析图，突出商品商品优缺点，以帮助用户进行选择，帮助用户区分商品是否值得购买，节约时间成本，提高整个购物的效率。本网站基于网络爬虫，拟用Node.js为语言技术，express为技术框架、MySQL存储数据，用Superagent爬取商品数据，数据真实有效，用Cheerio过滤并获取数据，用Canvas对数据以图表的方式可视化。最后网站在商品页给用户提供一个基于评论数据直观化的评论图表，以提升用户购物体验。
 Node.js是一个基于Chrome JavaScript运行时建立的平台， 用于方便地搭建响应速度快、易于扩展的网络应用。Node.js 使用事件驱动， 非阻塞I/O 模型而得以轻量和高效，非常适合在数据密集型的应用。以Node为服务则让网络爬虫系统实现起来意义非常，而它的功能库superagent和async更是让数据爬取更加便捷。
 
2.	功能模型
2.1.	客户端功能描述
2.1.1.	信息展示模块	
信息展示模块包括以下功能：
	商品信息展示。
	用户信息展示。
	评论信息展示。
2.1.2.	用户交互模块
用户交互模块包括以下功能：
	注册登录。
	信息修改。
	商品搜索。
	品牌评论。
	收藏商品。
	点击购买。
2.1.3.	后台管理模块
后台管理模块包括以下功能：
	数据爬取。
	用户管理。
	管理员管理。
2.2.	web服务端功能描述
2.2.1.	web服务端处理请求模块
	接收客户端的搜索查询请求，连接数据库进行查询并返回结果。
	接收客户端的注册登录请求，连接数据库并更新数据库信息。
	接收客户端的收藏、评论请求，连接数据库并更新数据库信息。
	接收客户端的数据爬取请求，在web站点下爬取目标网站数据并更新数据库信息。
	接收客户端的用户管理请求，连接数据库并更新数据库信息。
 
3.	数据模型
3.1.	数据逻辑描述
图3.1描述了整个网站的数据流向关系。主要包括用户查询、注册登录、品牌评论、品牌收藏、数据爬取、用户管理等的数据传输：

图3.1网站数据流图
3.2.	数据的具体表现
表3.1从功能的角度说明了数据在作为功能的输入到作为功能的输出过程中所经过的处理，通过输入到处理到输出的过程，描述在功能的实现过程中数据的表现：
表3.1数据具体表现表
功能	输入	处理	输出
搜索商品	搜索关键词	传送关键词	web服务端返回的查询结果
信息展示	网页路径	根据路径查询信息	web服务端返回的查询结果
注册登录	用户信息	序列化信息并传送	web服务端更新数据库并反馈
品牌评论	评论信息	传送相关信息	web服务端更新数据库并反馈
收藏商品	商品ID	传送商品ID	web服务端更新数据库并反馈
数据爬取	爬取的URL	爬取数据	web服务端更新数据库并反馈
用户管理	用户信息	传送用户信息	web服务端更新数据库并反馈
 
4.	用户行为模型
行为模型用以描述行为与系统状态之间的关系。通过构建行为模型，描述在接收到用户各种行为时系统状态的影响和应该做出的反应，通常使用状态图来描述。
4.1.	登录注册行为模型
对登录注册模块和数据传输模块进行状态描述。

图4.1登录注册行为状态图
4.2.	品牌评论行为模型
对品牌评论模块和数据传输模块进行状态描述。

图4.2品牌评论行为状态图
4.3.	商品收藏行为模型
对商品收藏模块和数据传输模块进行状态描述。

图4.3商品收藏行为状态图
4.4.	信息修改行为模型
对信息修改模块和数据传输模块进行状态描述。

图4.4信息修改行为状态图
4.5.	用户管理行为模型
对用户管理模块和数据传输模块进行状态描述。

图4.5用户管理行为状态图
 
5.	软硬件要求
5.1.	时间特性要求
本网站涉及到大量的链接跳转，要求系统能够在用户可接受时间范围内对跳转作出响应，对于异步请求要求用户可以在请求的同时可以进行其他交互。
5.2.	错误处理要求
本网站是对于错误的处理必须是友好的界面，并提供正确的跳转链接或提示，以提升用户体验。
5.3.	其它要求
	界面美观，提供给用户最好的购物体验。
	网站安全，提供给用户安全保障。 
5.4.	运行浏览器
本网站采用优雅降级的方法对浏览器做兼容，但是对于古老的IE6、7版本等不做支持，对其他主流浏览器古老的版本也不做支持，这些浏览器市场占有率已不足01.%。所以，本网站支持目前市场上比较稳定的主流浏览器。
5.5.	控制
因为本项目没有部署到线上。所以需要搭建web服务端环境，安装node，git控制台，输入以下命令，连接好数据库即可访问：
git clone https://github.com/xiaohuazheng/sharego1.2.git
cd sharego1.2
npm install 
npm start
 
附录2 设计文档
1.	系统结构设计
本系统包括客户端和web服务端。客户端主要划分成3个模块：用户交互模块、信息展示模块和后台管理数据爬取模块。web服务端主要用于处理客户端的请求，统一为一个模块：客户端请求处理模块。每个模块包含了相应的功能点，整个系统的结构如图1.1：

图1.1系统结构图
用户交互模块是客户端的一部分，其中，用户注册登录、信息修改、网页跳转、商品搜索、品牌评论、收藏商品、点击购买等都是通过点击页面上相应的功能按钮来发送请求获取新的页面；信息展示模块主要对爬取到的数据以及后台数据进行可视化，品牌展示模块对数据进行分类集中展示；后台管理模块的用户管理是管理员对网站用户以及其他管理员的管理功能模块，数据爬取是管理员通过点击相应的功能按钮触发对目标网站数据进行爬取的功能模块。
整个系统的操作流程如图1.2：

图1.2系统操作流程图
2.	概要设计
2.1.	设计目的
概要设计是通过需求分析对系统进行一个宏观上的设计，是系统的蓝图。它可以用来评估总体设计的可行性，并且为后面的详细设计工作提供指导和模块完整性的检查。通过概要设计，最主要的是要设计出系统的结构关系以及各个模块之间的联系。概要设计对本网站的实现起着至关重要的作用。
2.2.	用户交互模块概要设计
功能：从大体上来分，用户交互模块包括用户注册登录、信息修改、网页跳转、商品搜索、品牌评论、收藏商品、点击购买7个功能。具体如图2.1：

图2.1用户交互模块功能结构图
输入：模块的输入为用户对相应功能按钮的点击事件。
输出：模块的输出是由PC网站展示出来的响应页面。
接口：使用URL或AJAX的GET/POST方法进行参数传递。
2.3.	信息展示模块概要设计
功能：信息展示模块为系统的主要部分，根据用户输入或者点击跳转的url的不同，对不同分类的商品信息进行展示。主要包括商品信息展示、评论信息展示、用户信息展示、品牌信息展示。具体如图2.2：

图2.2商品信息展示模块功能结构图
输入：模块的输入为用户对相网页的URL输入或跳转链接点击事件。
输出：模块的输出为web服务端返回的数据可视化后的页面。
接口：通过网络套接口传递数据。
2.4.	后台管理模块概要设计
功能：后台管理模块主要是有管理员身份的用户对网站的普通用户以及其他管理员的管理，对网站商品的信息进行管理等。数据爬取是有管理员身份的用户点击相应功能按钮触发事件，对目标网站进行数据爬取，并存入数据库，等待客户端请求数据。具体如图2.3：

图2.3后台管理模块功能结构图
输入：模块的输入为登录用户为管理员并有相应功能按钮触发的事件。
输出：操作管理后的页面以及存入数据库的数据。
接口：使用URL或AJAX的GET/POST方法进行参数传递。
2.5.	web服务端处理请求模块概要设计

功能：web服务端处理请求模块主要是处理来自客户端的不同请求。如图3.6：

图3.6web服务端处理请求模块功能结构图
输入：来自客户端的请求。
输出：对客户端请求的反馈。
接口：通过网络套接口传递数据。
 
3.	详细设计
3.1.	引言
3.1.1.	编写目的
详细设计是对每个模块进行更加细节化更具体的设计、包括对系统各个模块的功能定义，各功能的输入和应该得到的输出，相应功能的逻辑设计以及运行流程等。目标有两个：实现模块功能的算法要逻辑上正确和算法描述要简明易懂。
3.1.2.	参考资料
表3.1参考资料说明表
序号	文档名
1	基于网络爬虫的商品评论导购网站——任务要求书
2	基于网络爬虫的商品评论导购网站——需求分析文档
3	基于网络爬虫的商品评论导购网站——概要设计文档
3.2.	用户交互模块详细设计
3.2.1.	模块描述
本模块是网站的主要模块。主要涉及用户注册登录、信息修改、网页跳转、商品搜索、品牌评论、收藏商品、点击购买等功能。
3.2.2.	功能
用户交互应该实现的功能和对功能的定义如表3.2所示。需要注意用户评论、收藏、购买等交互需要用户状态为已登录为前提。用户注册需要判断用户名是否已经存在，信息是否符合规范；用户登录需要判断密码是否符合，后台管理及数据爬取需要用户身份为管理员：
表3.2用户交互模块功能表
编号	功能点	功能点详细内容
USER_REG	注册	判断新用户信息是否符合规范，写入新用户信息
USER_LOG	登录	判断用户是否存在，改变网站状态为登录状态
USER_COMM	评论	判断评论信息是否符合规范，写入新评论数据并展示
USER_COLL	收藏	判断是否登录，写入新收藏商品信息
USER_BUY	购买	判断是否登录，跳转至购买页面
USER_CRAW	爬取数据	判断用户是否为管理员，爬取数据写入数据库
USER_ADMIN	管理用户	删除用户，增删管理员
USER_MOD	信息修改	用户登录状态下修改用户密码
USER_GO	网页跳转	用户点击功能按钮URL跳转，响应相应页面
USER_SEARCH	搜索	用户输入关键字，响应相应页面

3.2.3.	性能
本模块是系统的基础模块，包含了一系列的用户操作。为了呈现较好的用户体验，要求页面跳转流畅进行，并且页面动画能够十分顺畅自如。商品信息准确无误，不会出现超时延迟。
3.2.4.	设计方法
该模块的核心是Node路由的跳转，以及AJAX实现无刷新请求，对用户的操作进行请求前和请求后的响应。
路由跳转：用户输入的URL或者用户点击的跳转链接的URL，后端获取链接，并由路由分发至各自的控制器，控制器输出渲染的模板页面，最终生成页面反馈给用户。
AJAX无刷新请求：AJAX无刷新请求，用户点击功能按钮触发事件，通过AJAX的GET/POST方法传递数据到web服务端，web服务端根据请求的路径路由分发各自的控制器，由控制器与数据库进行交流并产出反馈，最终反馈给AJAX，客户端根据返回的结果做出对应的页面交互。
总的来说，该模块的设计思想就是接收用户请求，路由分发控制器，作出回应，AJAX实现异步请求，请求成功后发送信号用户交互页面。
3.2.5.	流程逻辑
	注册逻辑流程
用户进入注册页面，填写信息，模块会判断用户填写信息是否符合规范，并同时向后台请求用户名是否已经存在。当用户名不存在且用户所有信息符合规范后，向web服务端发送请求将信息加入数据库。如图3.1：

图3.1注册逻辑流程图
	登录逻辑流程
用户进入登陆页，填写信息，模块会判断用户填写信息是否符合规范，符合规范则向web服务端发送请求将验证用户名密码是否正确，正确则改变网站状态为用户登录状态。如图3.2：

图3.2登录逻辑流程图
	信息修改逻辑流程
用户状态为已登录，进入信息修改页，点击功能按钮触发事件。模块会判断用户填写信息是否符合规范，web服务端会判断用户原始密码是否正确，符合规范则向web服务端发送请求将用户信息更新。如图3.3：

图3.3信息修改逻辑流程图
	评论逻辑流程
用户状态为已登录，进入评论页，输入评论信息，模块会判断输入信息是否符合规范，符合规范则允许用户进行下一步，用户点击功能按钮触发事件。模块向web服务端发送请求将用户评论信息写入数据库，并实时展示在页面。如图3.4：

图3.4信息修改逻辑流程图
	搜索逻辑流程
用户输入关键词，点击功能按钮触发事件，模块向web服务端发送请求，将请求到的数据返回给页面，页面将数据信息展示出来。如图3.5：

图3.5搜索逻辑流程图
	收藏逻辑流程
点击功能按钮触发事件，模块会判断用户是否为登录状态并对非登录状态作出提示。如果为已登录状态，模块会向web服务端发送请求将用户收藏的商品信息写入数据库。如图3.6：

图3.6收藏逻辑流程图
	去购买逻辑流程
用户点击功能按钮触发事件，模块会跳转至相应商品购买页面。如图3.7：

图3.7去购买逻辑流程图

3.2.6.	路由设计
系统4个模块的接口的设计都遵循Node的路由设计规范，通过use/get/post等方法获取链接，分发路由，而对于模块类的成员尽可能的设计为私有，保证了良好的封装性，user提供用户交互的接口，通过export向外提供访问
3.2.7.	注释设计
	加在模块首部的注释。
	加在函数处的注释。
	加载各变量的功能的注释。
	加载业务逻辑处的注释等。
3.3.	信息展示模块详细设计
3.3.1.	模块描述
信息展示模块为系统的主要部分，根据用户输入或者点击跳转的url的不同，对不同分类的商品信息进行展示。
3.3.2.	功能
主要包括商品信息展示、评论信息展示、用户信息展示、品牌信息展示，表3.3是对功能的定义:
表3.3信息展示模块功能表
序号	功能点			功能点详细内容
INFO_DEAL	根据URL跳转页面	判断数据是否存在并展示不同页面
INFO_COMM	根据URL跳转页面	判断数据是否存在并展示不同页面
INFO_USER	根据URL跳转页面	判断用户登录状态并展示不用页面
INFO_BRAND	根据URL跳转页面	跳转并展示页面
3.3.3.	性能
信息展示模块是系统的基础模块之一，为了呈现较好的用户体验，要求页面跳转流畅进行。商品信息准确无误，不会出现超时延迟。
3.3.4.	设计方法
信息展示模块的核心是Node路由的跳转，在客户端要做出请求失败，请求数据暂无状态的反馈页面：
请求正常：快速响应页面，展示商品信息准确无误。
请求失败：显示友好的404页面，并提供正确的跳转链接。
请求数据暂无：显示友好的提示信息页面。并提供正确的跳转链接。
3.3.5.	流程逻辑
	商品信息跳转逻辑流程
用户输入URL或者点击跳转链接，模块发送请求，客户端根据返回数据显示不同页面。具体流程如图3.8：

图3.8商品信息跳转逻辑流程图
	评论信息跳转逻辑流程
用户输入URL或者点击跳转链接，模块判发送请求，客户端根据返回数据显示不同页面。具体流程如图3.9：

图3.9评论信息跳转逻辑流程图
	用户信息跳转逻辑流程
用户输入URL或者点击跳转链接，模块判断用户为登录状态则发送请求，客户端根据返回数据显示不同页面。具体流程如图3.10：

图3.10歌曲上传逻辑流程图
	品牌信息跳转逻辑流程
用户输入URL或者点击跳转链接，模块判发送请求，客户端根据返回数据显示不同页面。具体流程如图3.11： 

图3.11品牌信息跳转逻辑流程图
3.3.6.	接口设计
该模块接口的设计遵循Node的路由设计规范，分发路由至控制器，deal和index提供信息展示的接口，通过export向外提供访问。
3.3.7.	注释设计
	加在模块首部的注释。
	加在函数处的注释。
	加载各变量的功能的注释。
	加载业务逻辑处的注释等。
3.4.	后台管理模块详细设计
3.4.1.	模块描述
该模块是本网站基本模块之一，它提供给管理者管理的平台，并提供数据抓取平台。
3.4.2.	功能
后台管理模块主要是提供管理员管理网站用户，爬取目标网站数据并写入本地，具体功能的定义如表3.7：
表3.4后台管理模块功能定义列表
序号	功能点	功能点详细内容
ADMIN_USER	管理用户，设置管理员	增删管理员，删除用户等
ADMIN_CRAW	数据爬取	爬取目标网站商品信息写入数据库
3.4.3.	性能
本模块需要爬取数据准确无误，管理信息修改准确无误，商品信息修改及时生效，在正确的前提上逐步提升性能。
3.4.4.	设计方法
本模块主要为爬取数据，管理网站用户以及商品数据。具体如下：
数据爬取：通过Node库Superagent对目标网站进行数据爬取，通过Cheerio对数据进行过滤并最终存入数据库。
用户管理：对数据的增删查改。
3.4.5.	流程逻辑
	数据爬取逻辑流程
管理员点击功能按钮触发事件，模块向web服务端发送请求，并开始对数据进行爬取、过滤，存入数据库，爬取成功则返回成功的信息。具体流程如图3.12：

图3.12数据爬取逻辑流程图
	用户管理逻辑流程
管理员对普通用户进行删除或者设置为管理员操作，超级管理员对普通管理员进行设为普通用户操作，模块发送请求至web服务端，web服务端操作数据后返回成功信息。具体流程如图3.13：

图3.13用户管理逻辑流程图
3.4.6.	接口设计
该模块接口的设计遵循Node的路由设计规范，分发路由至控制器，Star提供数据爬取的接口，通过export向外提供访问。
3.4.7.	注释设计
	加在模块首部的注释。
	加在函数处的注释。
	加载各变量的功能的注释。
	加载业务逻辑处的注释等。
3.5.	web服务端处理请求模块详细设计
3.5.1.	模块描述
该模块接收客户端数据传输模块的请求并把处理结果反馈给客户端。
3.5.2.	功能
由于客户端要求实现用户注册登录、信息修改、网页跳转、商品搜索、品牌评论、收藏商品、点击购买、数据爬取、用户管理等功能，因此该模块要求完成搜索处理、数据处理、路由分发、结果反馈等功能。功能定义如表3.5：
表3.5web服务端处理请求模块功能表
序号	功能点	功能点详细内容
SERV_SEARCH	搜索处理	从接收到的请求提取搜索关键字，搜索数据库并反馈
SERV_DATA	数据处理	从接收到的请求判断增删查改
SERV_ROUTE	路由分发	从接收到的请求分发路由至各控制器
3.5.3.	性能
该模块为系统的web服务端部分，需要处理来自客户端的请求。基本要求是web服务端能识别来自客户端的各种请求并给出正确的回应。能够在可接受的时间范围内对客户端请求作出回应。 
3.5.4.	设计方法
web服务端的设计采用Node.js 事件驱动， 非阻塞I/O 模型得以轻量和高效。就具体功能来说，设计如下：
搜索请求处理：当接收到客户端的请求后，解析出查询的关键词并对之进行处理，调用数据库访问接口，传入sql语句进行查询，然后传回封装好的查询结果，最后回传到客户端。
数据请求处理：对于用户注册登录、信息修改、品牌评论、收藏商品、数据爬取、用户管理等请求，同样，先解析接收到的请求信息，连接数据库查询，将结果进行封装后传回。
路由分发：网站各不同请求分发至不同的控制器进行处理，并对处理的结果返回至相应的客户端。
3.5.5.	流程逻辑
	搜索请求处理逻辑流程：
web服务端解析出查询的关键词并对之进行处理，调用数据库访问接口，传入sql语句进行查询，然后传回封装好的查询结果，最后回传到客户端。流程如图3.15：

图3.15搜索请求处理逻辑流程图
	数据请求处理逻辑流程：
解析接收到的请求信息，连接数据库查询，将结果进行封装后返回给客户端。如图3.16：

图3.16数据请求处理逻辑流程图
	路由分发逻辑流程：
分发不同请求至不同的控制器进行处理，并对处理的结果返回至相应的客户端。流程如图3.17： 

图3.17路由分发处理逻辑流程图
3.5.6.	接口
Route为web服务端主要模块，分发路由。Model提供数据库方法，Mysql用于连接数据库。
3.5.7.	注释设计
	加加在模块首部的注释。
	加在函数处的注释。
	加载各变量的功能的注释。
	加载业务逻辑处的注释等。
 
附录3软件测试文档
1.	引言
1.1.	编写目的

通过整个测试过程，包括测试计划、测试设计、案例编写、测试总结等步骤去了解本系统的质量如何。是否存在缺陷，若存在缺陷则其原因是什么以及该如何修复。希望在本网站发布之前能将缺陷修复。同时向用户呈现本系统的具体测试细节，使用户能够明白系统的网站缺陷，也便于用户理解和使用本网站。本文档面向的读者主要是项目的开发人员和测试人员。
1.2.	测试环境

Chrome：
版本：49.0.2623.110
IE：
版本：IE9、IE10、IE11
Firfox：
版本：45.0.1.5918
因为不同浏览器的兼容性问题，这里分别给出不同主流浏览器下的运行效果，之后的测试都在chrome浏览器下进行测试，之所以选择chrome，是因为它的市场占有率是非常高的，也是开发者最喜欢的开发环境之一。
1.3.	参考资料

表1.1参考资料说明表
序号	文档名
1	基于网络爬虫的商品评论导购网站——任务要求书
2	基于网络爬虫的商品评论导购网站——需求分析文档
3	基于网络爬虫的商品评论导购网站——概要设计文档
4	基于网络爬虫的商品评论导购网站——详细设计文档
2.	测试计划
2.1.	信息展示模块测试计划
表2.1信息展示模块测试计划表
测试功能	输入	预期结果
打开页面URL	展示顶部栏，导航栏，商品，左侧栏、banner幻灯片、分享栏、底部等 	展示顶部栏，导航栏，商品，左侧栏、banner幻灯片、分享栏、底部
导航栏hover	导航栏hover有效果	导航栏hover有效果
登录注册hover	登录注册hover为红色且可点击	登录注册hover为红色且可点击
Logo hover	Logo hover时显示的url为主页	Logo hover时显示的url为主页
左侧导航hover	左侧导航hover有红色下划线且可点击	左侧导航hover有红色下划线且可点击
右侧分享栏hover	右侧分享栏hover出现分享选择框	右侧分享栏hover出现分享选择框
商品hover	商品hover出现红色边框	商品hover出现红色边框
商品名称hover	商品名称hover显示全名	商品名称hover显示全名
下滑或下拉滚动条	网站下滑一定距离后出现跟随导航，回顶部图标，点击缓慢回顶部，左侧导航和右侧分享跟随滑动	网站下滑一定距离后出现跟随导航，回顶部图标，点击缓慢回顶部，左侧导航和右侧分享跟随滑动
搜索框聚焦	搜索框聚焦有边框出现	搜索框聚焦有边框出现
登录	左侧导航显示我的收藏和账号信息，hover有红色下划线	左侧导航显示我的收藏和账号信息，hover有红色下划线
hover商品图片和进入评论页	商品图片和进入评论页可点击	商品图片和进入评论页可点击
hover幻灯片	幻灯片切换正常	幻灯片切换正常
评论页商品hover	评论页商品大图可点击	评论页商品大图可点击
收藏商品hover	收藏商品hover时出现删除收藏按钮	收藏商品hover时出现删除按钮
没有收藏商品	没有收藏商品时显示无收藏的页面	没有收藏商品时显示无收藏的页面
点击进入个人信息页	响应页面，信息正确，没有左侧导航栏	响应页面，信息正确，没有左侧导航栏
左侧栏hover	左侧栏hover时有灰色效果	左侧栏hover时有灰色效果
点击左侧栏	当前所在栏呈现灰色背景	当前所在栏呈现灰色背景
点击修改密码	响应页面，出现可填写框，提交按钮	响应页面，出现可填写框，提交按钮
点击进入商品评论页	显示评论页面正常	显示评论页面正常
评论页下滑查看评论图表	评论图标正常	评论图标正常
评论页评论图表hover	评论图表hover每一个角显示各自的名称和数据	评论图表hover每一个角显示各自的名称和数据
评论页下滑至下方评论信息	评论信息显示无错乱	评论信息显示无错乱
评论页查看更多评论hover	评论页查看更多评论hover红色可点击	评论页查看更多评论hover红色可点击
点击进入品牌介绍页	介绍页显示正常无错乱	介绍页显示正常无错乱
查看评论信息	评论信息正常展示	评论信息正常展示
专场链接hover	专场链接可点击	专场链接可点击
查看发布评论	未登录发表评论为灰色上方有小提示，登录状态为红色无提示	未登录发表评论为灰色上方有小提示，登录状态为红色无提示
查看评论信息时间	新发表的评论信息时间在前面	新发表的评论信息时间在前面
2.2.	用户交互模块测试计划
表2.2用户过户交互模块测试计划表
测试功能	输入	预期结果
点击注册	进入注册页面	进入注册页面
输入用户名	判断用户名规范，给出相应提示	判断用户名规范，给出相应提示
输入邮箱	判断邮箱规范，给出相应提示	判断邮箱规范，给出相应提示
输入密码	判断密码规范，给出相应提示	判断密码规范，给出相应提示
再次输入面膜	判断密码是否一样，给出提示	判断密码是否一样，给出相应提示
在没填完情况下点击注册	出现小提示	出现小提示
填好后点击注册	注册成功或失败都出现小提示并清空输入框	注册成功或失败都出现小提示并清空输入框
注册失败	提示注册失败请重试	提示注册失败请重试
注册成功	提示注册成功	提示注册成功
点击下方的去登录	动画切换到登陆页	动画切换到登陆页
点击登录	进入登录页面	进入登录页面
输入用户名	判断用户名规范，给出相应提示	判断用户名规范，给出相应提示
输入密码	判断密码规范，给出相应提示	判断密码规范，给出相应提示
点击登录	成功后出现成功提示，跳转至登录前的页面	成功后出现成功提示，跳转至登录前的页面
点击登录	失败后提示用户名或密码错误	失败后提示用户名或密码错误
点击去注册	动画跳转至注册页面	动画跳转至注册页面
未登录状态下点击发布评论	上方出现提示信息：发表评论，请先登录	上方出现提示信息：发表评论，请先登录
登录状体下点击发布评论	判断用户输入内容不符合规范则作出提示	判断用户输入内容不符合规范则作出提示
输入框聚焦	原来的文字消失	原来的文字消失
输入文字	下方的剩余字数跟随变化	下方的剩余字数跟随变化
输入符合规范点击发表评论	成功后显示弹窗提示，弹框可点击关闭，并在下方实时生成评论，发表之后输入框清空	成功后显示弹窗提示，弹框可点击关闭，并在下方实时生成评论，发表之后输入框清空
刷新评论页面	最新评论排在最前面	最新评论排在最前面
点击进入商品评论页	进入页面，页面展示正常	进入页面，页面展示正常
点击收藏	未登录会提示请先登录，登陆了则展示收藏成功	未登录会提示请先登录，登陆了则展示收藏成功
点击购买	跳转至购买页面	跳转至购买页面
点击密码修改	进入密码修改页面	进入密码修改页面
输入原始密码	判断密码规范，作出相应提示	判断密码规范，作出相应提示
输入新密码	判断密码规范，作出相应提示	判断密码规范，作出相应提示
再次输入密码	判断密码是否一样，作出提示	判断密码是否一样，作出提示
点击重新出入	输入框被清空	输入框被清空
点击修改	对修改结果做出提示，并把输入框清空	对修改结果做出提示，并把输入框清空
搜索框聚焦	搜索框外层出现边框	搜索框外层出现边框
输入关键词点击搜索	跳转至搜索结果页	跳转至搜索结果页
没有搜索结果	展示没有搜索结果的友好界面	展示没有搜索结果的友好界面
搜索成功	展示搜索到的商品	展示搜索到的商品

2.3.	后台管理模块测试计划
表2.3后台管理模块测试计划表
测试功能	输入	预期结果
点击进入管理后台	页面显示正常无紊乱	页面显示正常无紊乱
点击数据爬取	跳转至数据爬取页面	跳转至数据爬取页面
点击对应类商品数据爬取功能按钮	控制台显示出正在爬取并存入数据库的信息，爬取结束弹框提示爬取成功	控制台显示出正在爬取并存入数据库的信息，爬取结束弹框提示爬取成功
点击进入用户设置	页面显示网站用户信息	页面显示网站用户信息
用户信息hover	hover时出现可点击按钮	hover时出现可点击按钮
点击删除用户	用户在此页面的信息实时删除，刷新后也没有删除用户的信息	用户在此页面的信息实时删除，刷新后也没有删除用户的信息
点击设置管理员	用户在此页面的信息实时删除，在管理员设置页面出现刚刚设置的管理员信息	用户在此页面的信息实时删除，在管理员设置页面出现刚刚设置的管理员信息
点击进入管理员设置	跳转至管理员设置页面	跳转至管理员设置页面
管理员信息hover	hover时出现可点击按钮	hover时出现可点击按钮
点击删除管理员	删除的管理员在此页面的信息实时删除，刷新后也没有删除管理员的信息	删除的管理员在此页面的信息实时删除，刷新后也没有删除管理员的信息
点击进入用户设置页面	在管理员设置页面删除的用户进入此页面	在管理员设置页面删除的用户进入此页面
鼠标hover商品	出现管理商品按钮	出现管理商品按钮
点击管理商品	跳转至管理商品页面，商品信息展示正确	跳转至管理商品页面，商品信息展示正确
输入框聚焦	内容可编辑	内容可编辑
输入不符合规范	提示输入不符合规范	提示输入不符合规范
点击修改	修改信息成功提示修改成功，失败则提示修改失败，请重试	修改信息成功提示修改成功，失败则提示修改失败，请重试

2.4.	web服务端处理请求模块测试计划
表2.4web服务端处理请求模块测试计划表
测试功能	输入	预期结果
客户端输入合理关键词搜索	正确解析出关键字，查询正确的表，得到正确的结果并封装了结果数据反馈给客户端	正确解析出关键字，查询正确的表，得到正确的结果并封装了结果数据反馈给客户端
客户端输入不合理关键词搜索	正确解析出歌手名关键字，查询正确的表，没有得到结果则返回空值给客户端	正确解析出歌手名关键字，查询正确的表，没有得到结果则返回空值给客户端
注册输入用户名	正确的解析用户名，查询正确的表，并返回用户名是否已存在的结果给客户端	正确的解析用户名，查询正确的表，并返回用户名是否已存在的结果给客户端
输入正确信息并点击注册	正确的解析用户名，邮箱，密码，插入正确的表，并返回成功的消息给客户端	正确的解析用户名，邮箱，密码，插入正确的表，并返回成功的消息给客户端
输入正确信息并点击登录	正确的解析用户名，密码，查询正确的表，并返回成功的消息给客户端	正确的解析用户名，密码，查询正确的表，并返回成功的消息给客户端
信息修改填入正确信息便点击修改	正确的解析原始密码，查询正确的表，插入数据到正确的表，并返成功是否给客户端	正确的解析原始密码，查询正确的表，插入数据到正确的表，并返成功是否给客户端
对用户进行删除或设置管理员	正确的解析用户信息，查询并更新正确的表，并返回成功是否给客户端	正确的解析用户信息，查询并更新正确的表，并返回成功是否给客户端
正确输入商品信息并点击修改	正确的解析商品信息，查询正确的表，更新数据，并返成功是否给客户端	正确的解析商品信息，查询正确的表，更新数据，并返成功是否给客户端
正确输入评论信息并点击发布评论	正确的解析评论内容，评论人信息，评论时间，插入数据正确的表，并返成功是否给客户端	正确的解析评论内容，评论人信息，评论时间，插入数据正确的表，并返成功是否给客户端
点击收藏	正确的解析商品信息，收藏人信息，插入数据正确的表，并返成功是否给客户端	正确的解析商品信息，收藏人信息，插入数据正确的表，并返成功是否给客户端
点击爬取数据	爬取目标网站数据并存入正确的数据库，并返回成功与否给客户端。	爬取目标网站数据并存入正确的数据库，并返回成功与否给客户端。

3.	测试用例
3.1.	信息展示模块
3.1.1.	商品信息展示测试用例
这里对网站商品信息展示的各种状态和各种交互效果进行测试用例编写，具体如表3.1：
表3.1商品信息展示测试用例表
测试用例ID	Info1
测试用例名称	商品信息展示
前提条件	无
操作	预期结果	实际结果	测试状态
打开页面URL	展示顶部栏，导航栏，商品，左侧栏、banner幻灯片、分享栏、底部等 	展示顶部栏，导航栏，商品，左侧栏、banner幻灯片、分享栏、底部	PASS
导航栏hover	导航栏hover有效果	导航栏hover有效果	PASS
登录注册hover	登录注册hover为红色且可点击	登录注册hover为红色且可点击	PASS
Logo hover	Logo hover时显示的url为主页	Logo hover时显示的url为主页	PASS
左侧导航hover	左侧导航hover有红色下划线且可点击	左侧导航hover有红色下划线且可点击	PASS
右侧分享栏hover	右侧分享栏hover出现分享选择框	右侧分享栏hover出现分享选择框	PASS
商品hover	商品hover出现红色边框	商品hover出现红色边框	PASS
商品名称hover	商品名称hover显示全名	商品名称hover显示全名	PASS
下滑或下拉滚动条	网站下滑一定距离后出现跟随导航，回顶部图标，点击缓慢回顶部，左侧导航和右侧分享跟随滑动	网站下滑一定距离后出现跟随导航，回顶部图标，点击缓慢回顶部，左侧导航和右侧分享跟随滑动	PASS
搜索框聚焦	搜索框聚焦有边框出现	搜索框聚焦有边框出现	PASS
登录	左侧导航显示我的收藏和账号信息，hover有红色下划线	左侧导航显示我的收藏和账号信息，hover有红色下划线	PASS
hover商品图片和进入评论页	商品图片和进入评论页可点击	商品图片和进入评论页可点击	PASS
hover幻灯片	幻灯片切换正常	幻灯片切换正常	PASS
评论页商品hover	评论页商品大图可点击	评论页商品大图可点击	PASS
收藏商品hover	收藏商品hover时出现删除收藏按钮	收藏商品hover时出现删除按钮	PASS
没有收藏商品	没有收藏商品时显示无收藏的页面	没有收藏商品时显示无收藏的页面	PASS

3.1.2.	用户信息展示测试用例
这里对用户信息展示的各种状态和各种交互效果进行测试用例编写，具体见表3.2：

表3.2用户信息测试用例表
测试用例ID	Info2
测试用例名称	用户信息展示
前提条件	登录状态
操作	预期结果	实际结果	测试状态
点击进入个人信息页	响应页面，信息正确，没有左侧导航栏	响应页面，信息正确，没有左侧导航栏	PASS
左侧栏hover	左侧栏hover时有灰色效果	左侧栏hover时有灰色效果	PASS
点击左侧栏	当前所在栏呈现灰色背景	当前所在栏呈现灰色背景	PASS
点击修改密码	响应页面，出现可填写框，提交按钮	响应页面，出现可填写框，提交按钮	PASS

3.1.3.	评论信息展示测试用例
这里对评论信息展示的各种状态和各种交互效果进行测试用例编写，具体见表3.3：
表3.3评论信息展示测试用例表
测试用例ID	Info3
测试用例名称	歌词解析
前提条件	无
操作	预期结果	实际结果	测试状态
点击进入商品评论页	显示评论页面正常	显示评论页面正常	PASS
评论页下滑查看评论图表	评论图标正常	评论图标正常	PASS
评论页评论图表hover	评论图表hover每一个角显示各自的名称和数据	评论图表hover每一个角显示各自的名称和数据	PASS
评论页下滑至下方评论信息	评论信息显示无错乱	评论信息显示无错乱	PASS
评论页查看更多评论hover	评论页查看更多评论hover红色可点击	评论页查看更多评论hover红色可点击	PASS
点击进入品牌介绍页	介绍页显示正常无错乱	介绍页显示正常无错乱	PASS
查看评论信息	评论信息正常展示	评论信息正常展示	PASS
专场链接hover	专场链接可点击	专场链接可点击	PASS
查看发布评论	未登录发表评论为灰色上方有小提示，登录状态为红色无提示	未登录发表评论为灰色上方有小提示，登录状态为红色无提示	PASS
查看评论信息时间	新发表的评论信息时间在前面	新发表的评论信息时间在前面	PASS

3.2.	用户交互模块
3.2.1.	注册登录功能测试用例
这里对注册登录的各种状态和各种交互效果进行测试用例编写，具体如表3.4：
表3.4注册登录功能测试用例表
测试用例ID	User1
测试用例名称	注册登录
前提条件	无
操作	预期结果	实际结果	测试状态
点击注册	进入注册页面	进入注册页面	PASS
输入用户名	判断用户名规范，给出相应提示	判断用户名规范，给出相应提示	PASS
输入邮箱	判断邮箱规范，给出相应提示	判断邮箱规范，给出相应提示	PASS
输入密码	判断密码规范，给出相应提示	判断密码规范，给出相应提示	PASS
再次输入面膜	判断密码是否一样，给出提示	判断密码是否一样，给出相应提示	PASS
在没填完情况下点击注册	出现小提示	出现小提示	PASS
填好后点击注册	注册成功或失败都出现小提示并清空输入框	注册成功或失败都出现小提示并清空输入框	PASS
注册失败	提示注册失败请重试	提示注册失败请重试	PASS
注册成功	提示注册成功	提示注册成功	PASS
点击下方的去登录	动画切换到登陆页	动画切换到登陆页	PASS
点击登录	进入登录页面	进入登录页面	PASS
输入用户名	判断用户名规范，给出相应提示	判断用户名规范，给出相应提示	PASS
输入密码	判断密码规范，给出相应提示	判断密码规范，给出相应提示	PASS
点击登录	成功后出现成功提示，跳转至登录前的页面	成功后出现成功提示，跳转至登录前的页面	PASS
点击登录	失败后提示用户名或密码错误	失败后提示用户名或密码错误	PASS
点击去注册	动画跳转至注册页面	动画跳转至注册页面	PASS

3.2.2.	评论收藏购买功能测试用例
这里对评论功能的各种状态和各种交互效果进行测试用例编写，具体如表3.5：
表3.5评论收藏购买测试用例表
测试用例ID	User2
测试用例名称	评论收藏购买
前提条件	无
操作	预期结果	实际结果	测试状态
未登录状态下点击发布评论	上方出现提示信息：发表评论，请先登录	上方出现提示信息：发表评论，请先登录	PASS
登录状体下点击发布评论	判断用户输入内容不符合规范则作出提示	判断用户输入内容不符合规范则作出提示	PASS
输入框聚焦	原来的文字消失	原来的文字消失	PASS
输入文字	下方的剩余字数跟随变化	下方的剩余字数跟随变化	PASS
输入符合规范点击发表评论	成功后显示弹窗提示，弹框可点击关闭，并在下方实时生成评论，发表之后输入框清空	成功后显示弹窗提示，弹框可点击关闭，并在下方实时生成评论，发表之后输入框清空	PASS
刷新评论页面	最新评论排在最前面	最新评论排在最前面	PASS
点击进入商品评论页	进入页面，页面展示正常	进入页面，页面展示正常	PASS
点击收藏	未登录会提示请先登录，登陆了则展示收藏成功	未登录会提示请先登录，登陆了则展示收藏成功	PASS
点击购买	跳转至购买页面	跳转至购买页面	PASS

3.2.3.	信息修改功能测试用例
这里对信息修改功能的各种状态和各种交互效果进行测试用例编写，具体见表3.6：
表3.6信息修改购买测试用例表
测试用例ID	User3
测试用例名称	信息修改
前提条件	登录状态
操作	预期结果	实际结果	测试状态
点击密码修改	进入密码修改页面	进入密码修改页面	PASS
输入原始密码	判断密码规范，作出相应提示	判断密码规范，作出相应提示	PASS
输入新密码	判断密码规范，作出相应提示	判断密码规范，作出相应提示	PASS
再次输入密码	判断密码是否一样，作出提示	判断密码是否一样，作出提示	PASS
点击重新出入	输入框被清空	输入框被清空	PASS
点击修改	对修改结果做出提示，并把输入框清空	对修改结果做出提示，并把输入框清空	PASS

3.2.4.	商品搜索功能测试用例
这里对商品搜索功能的各种状态和各种交互效果进行测试用例编写，具体见表3.7：
表3.7商品搜索测试用例表
测试用例ID	User4
测试用例名称	商品搜索
前提条件	无
操作	预期结果	实际结果	测试状态
搜索框聚焦	搜索框外层出现边框	搜索框外层出现边框	PASS
输入关键词点击搜索	跳转至搜索结果页	跳转至搜索结果页	PASS
没有搜索结果	展示没有搜索结果的友好界面	展示没有搜索结果的友好界面	PASS
搜索成功	展示搜索到的商品	展示搜索到的商品	PASS

3.3.	后台管理模块
3.3.1.	数据爬取功能测试用例
这里对商品搜索功能的各种状态和各种交互效果进行测试用例编写,具体见表3.8：
表3.8数据爬取测试用例表
测试用例ID	Admin1
测试用例名称	数据爬取
前提条件	登录用户为管理员
操作	预期结果	实际结果	测试状态
点击进入管理后台	页面显示正常无紊乱	页面显示正常无紊乱	PASS
点击数据爬取	跳转至数据爬取页面	跳转至数据爬取页面	PASS
点击对应类商品数据爬取功能按钮	控制台显示出正在爬取并存入数据库的信息，爬取结束弹框提示爬取成功	控制台显示出正在爬取并存入数据库的信息，爬取结束弹框提示爬取成功	PASS

3.3.2.	用户管理功能测试用例
这里对用户管理功能的各种状态和各种交互效果进行测试用例编写，具体见表3.9：
表3.9用户管理测试用例表
测试用例ID	Admin2
测试用例名称	用户管理
前提条件	登录用户为管理员
操作	预期结果	实际结果	测试状态
点击进入用户设置	页面显示网站用户信息	页面显示网站用户信息	PASS
用户信息hover	hover时出现可点击按钮	hover时出现可点击按钮	PASS
点击删除用户	用户在此页面的信息实时删除，刷新后也没有删除用户的信息	用户在此页面的信息实时删除，刷新后也没有删除用户的信息	PASS
点击设置管理员	用户在此页面的信息实时删除，在管理员设置页面出现刚刚设置的管理员信息	用户在此页面的信息实时删除，在管理员设置页面出现刚刚设置的管理员信息	PASS

3.3.3.	管理员管理功能测试用例
这里对管理员管理功能的各种状态和各种交互效果进行测试用例编写，具体见表3.10：
表3.10管理员管理测试用例表
测试用例ID	Admin3
测试用例名称	管理员管理
前提条件	登录用户为超级管理员
操作	预期结果	实际结果	测试状态
点击进入管理员设置	跳转至管理员设置页面	跳转至管理员设置页面	PASS
管理员信息hover	hover时出现可点击按钮	hover时出现可点击按钮	PASS
点击删除管理员	删除的管理员在此页面的信息实时删除，刷新后也没有删除管理员的信息	删除的管理员在此页面的信息实时删除，刷新后也没有删除管理员的信息	PASS
点击进入用户设置页面	在管理员设置页面删除的用户进入此页面	在管理员设置页面删除的用户进入此页面	PASS

3.4.	web服务端处理请求模块

该模块的测试主要是观察客户端模块的测试数据，被web服务端接收后，在解析、查询、反馈这些环节是否出错。
3.4.1.	搜索请求处理测试用例
这里对web服务端对搜索请求处理功能的测试用例编写，具体见表3.12：
表3.12搜索请求处理测试用例表
测试用例ID	Serv1
测试用例名称	搜索请求处理
前提条件	接收到客户端的搜索请求
输入	预期结果	实际结果	测试状态
客户端输入合理关键词搜索	正确解析出关键字，查询正确的表，得到正确的结果并封装了结果数据反馈给客户端	正确解析出关键字，查询正确的表，得到正确的结果并封装了结果数据反馈给客户端	PASS
客户端输入不合理关键词搜索	正确解析出歌手名关键字，查询正确的表，没有得到结果则返回空值给客户端	正确解析出歌手名关键字，查询正确的表，没有得到结果则返回空值给客户端	PASS

3.4.2.	注册登录请求处理测试用例
这里对web服务端对注册登录请求处理功能的测试用例编写，信息修改，用户管理等同理。具体见表3.13：
表3.13注册登录请求处理测试用例表
测试用例ID	Serv2
测试用例名称	注册登录请求处理
前提条件	接收到注册登录的请求
输入	预期结果	实际结果	测试状态
注册输入用户名	正确的解析用户名，查询正确的表，并返回用户名是否已存在的结果给客户端	正确的解析用户名，查询正确的表，并返回用户名是否已存在的结果给客户端	PASS
输入正确信息并点击注册	正确的解析用户名，邮箱，密码，插入正确的表，并返回成功的消息给客户端	正确的解析用户名，邮箱，密码，插入正确的表，并返回成功的消息给客户端	PASS
输入正确信息并点击登录	正确的解析用户名，密码，查询正确的表，并返回成功的消息给客户端	正确的解析用户名，密码，查询正确的表，并返回成功的消息给客户端	PASS
信息修改填入正确信息便点击修改	正确的解析原始密码，查询正确的表，插入数据到正确的表，并返成功是否给客户端	正确的解析原始密码，查询正确的表，插入数据到正确的表，并返成功是否给客户端	PASS
对用户进行删除或设置管理员	正确的解析用户信息，查询并更新正确的表，并返回成功是否给客户端	正确的解析用户信息，查询并更新正确的表，并返回成功是否给客户端	PASS
正确输入商品信息并点击修改	正确的解析商品信息，查询正确的表，更新数据，并返成功是否给客户端	正确的解析商品信息，查询正确的表，更新数据，并返成功是否给客户端	PASS

3.4.3.	评论或收藏请求处理测试用例
这里对web服务端对评论或收藏请求处理功能的测试用例编写，具体见表3.14：
表3.14评论或收藏请求处理测试用例表
测试用例ID	Serv3
测试用例名称	评论、收藏
前提条件	接收到评论或收藏请求
输入	预期结果	实际结果	测试状态
正确输入评论信息并点击发布评论	正确的解析评论内容，评论人信息，评论时间，插入数据正确的表，并返成功是否给客户端	正确的解析评论内容，评论人信息，评论时间，插入数据正确的表，并返成功是否给客户端	PASS
点击收藏	正确的解析商品信息，收藏人信息，插入数据正确的表，并返成功是否给客户端	正确的解析商品信息，收藏人信息，插入数据正确的表，并返成功是否给客户端	PASS

3.4.4.	数据爬取请求处理测试用例
这里对web服务端对评论或收藏请求处理功能的测试用例编写。具体见表3.15：
表3.15数据爬取请求处理测试用例表
测试用例ID	Case4
测试用例名称	数据爬取请求处理
前提条件	接收到数据爬取请求
输入	预期结果	实际结果	测试状态
点击爬取数据	爬取目标网站数据并存入正确的数据库，并返回成功与否给客户端。	爬取目标网站数据并存入正确的数据库，并返回成功与否给客户端。	PASS

4.	测试结果分析

在测试过程中，测试结果与预期相同，说明网站设计符合用户需求。
 
附录4 用户文档说明书
1.	网站描述

网站是一个基于网络爬虫的商品评论导购网站。网站前端具有户注册登录、信息修改、网页跳转、商品搜索、品牌评论、收藏商品、点击购买等功能。网站后台系统具有数据爬取、用户管理等功能。
2.	使用说明
网站首页如图2.1：
 
图2.1基于网络爬虫的商品评论导购网站首页
2.1.	前台主要页面

点击导航栏上的链接，跳转至对应分类，如图2.2：
 
图2.2跳转分类页
点击我的收藏如图2.3所示：
 
图2.3我的收藏
点击左侧导航的推荐如图2.4所示：
 
图2.4左侧导航推荐
点击账号信息栏如图2.5:：
 
图2.5账号信息页
点击进进入品牌介绍页，如图2.6：
 
图2.6品牌介绍页
点击商品评论页，如图2.7所示：
 
图2.7商品评论页
点击进入登录注册页，如图2.8：
 
图2.8登录注册页
2.2.	后台管理主要页面

点击进入后台管理，如图2.9：
 
图2.9后台管理页面
点击数据爬取页面，如图2.10：
 
图2.10数据爬取页面
点击进入用户管理，如图2.11：
 
图2.11用户管理

2.3.	搜索查询页

搜索查询到结果，如图2.12：
 
图2.12搜索到结果
没有搜索到结果时，如图2.13。
 
图2.13未搜索到结果

2.4.	发表评论成功

如图2.14：
 
图2.14发表评论成功
发表失败：
 
图2.15发表失败

 
附录5  源代码
1.	客户端部分
1.1.	注册登录核心代码


1.2.	商品事件核心代码



1.3.	商品收藏核心代码


1.4.	品牌评论核心代码


1.5.	信息修改核心代码



1.6.	用户管理核心代码


2.	web服务端部分
2.1.	web服务端路由核心代码


2.2.	商品评论页核心代码


2.3.	数据爬取核心代码


2.4.	其他控制器核心代码


